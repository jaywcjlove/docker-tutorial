<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Docker 入门教程</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta description="Docker 是一个开源的应用容器引擎，而一个容器其实是一个虚拟化的独立的环境，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。">
    <meta keywords="docker,tutorial,containers">
    <link rel="icon" href="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22%3E%3Ctext%20y=%22.9em%22%20font-size=%2290%22%3E🐳%3C/text%3E%3C/svg%3E" type="image/x-icon">
  </head>
  <body><script type="module">const GITHUB_CORNERS_TEMPLATE = document.createElement("template");
GITHUB_CORNERS_TEMPLATE.innerHTML = `
<style>
:host a:hover .octo-arm { animation: octocat-wave 560ms ease-in-out; }
@keyframes octocat-wave {
  0%, 100% { transform: rotate(0); }
  20%, 60% { transform: rotate(-25deg); }
  40%, 80% { transform: rotate(10deg); }
}
@media (max-width:500px) {
  :host a:hover .octo-arm { animation: none; }
  :host .octo-arm { animation: octocat-wave 560ms ease-in-out; }
}
</style>
<svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true" style="position: absolute; border: 0px; top: 0px;">
  <a xlink:href="https://github.com/uiwjs/react-github-corners" target="_blank" rel="nofollow sponsored" style="fill: rgb(21, 21, 19); color: rgb(255, 255, 255);">
    <g>
      <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
      <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" class="octo-arm" style="transform-origin: 130px 106px;"></path>
      <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </g>
  </a>
</svg>
`;
export class GithubCorners extends HTMLElement {
    constructor() {
        super();
        this.right = '0';
        this.shadow = this.attachShadow({ mode: 'open' });
        this.shadow.appendChild(this.ownerDocument.importNode(GITHUB_CORNERS_TEMPLATE.content, true));
        this.update();
    }
    static get observedAttributes() {
        return ['z-index', 'target', 'height', 'width', 'href', 'color', 'fill', 'position', 'top', 'left', 'right', 'bottom', 'transform'];
    }
    setAttr(name, value) {
        const svg = this.shadow.querySelector('svg');
        if (/(href)/.test(name.toLocaleLowerCase())) {
            svg.lastElementChild.setAttribute('xlink:href', value);
        }
        else if (/(color|fill)/.test(name.toLocaleLowerCase())) {
            svg.firstElementChild.style[name] = value;
        }
        else if (/(z-index|height|width|position|top|left|right|bottom|transform)/.test(name.toLocaleLowerCase())) {
            svg.style[name] = value;
        }
        else {
            svg.setAttribute(name, value);
        }
    }
    update() {
        ;
        [...this.getAttributeNames(), 'right'].forEach((name) => {
            const value = this.getAttribute(name) || this[name] || '';
            this.setAttr(name, value);
        });
    }
    attributeChangedCallback(name, oldValue, newValue) {
        if (oldValue !== newValue) {
            this.setAttr(name, newValue);
        }
    }
}
customElements.define('github-corners', GithubCorners);</script><github-corners target="__blank" position="fixed" z-index="999" href="https://github.com/jaywcjlove/docker-tutorial"></github-corners><dark-mode permanent style="position: fixed; top: 8px; left: 10px; z-index: 999;" dark="Dark" light="Light"></dark-mode><script>const t=document;const e="_dark_mode_theme_";const s="permanent";const o="colorschemechange";const i="permanentcolorscheme";const h="light";const r="dark";const n=(t,e,s=e)=>{Object.defineProperty(t,s,{enumerable:true,get(){const t=this.getAttribute(e);return t===null?"":t},set(t){this.setAttribute(e,t)}})};const c=(t,e,s=e)=>{Object.defineProperty(t,s,{enumerable:true,get(){return this.hasAttribute(e)},set(t){if(t){this.setAttribute(e,"")}else{this.removeAttribute(e)}}})};class a extends HTMLElement{static get observedAttributes(){return["mode",h,r,s]}LOCAL_NANE=e;constructor(){super();this.t()}connectedCallback(){n(this,"mode");n(this,r);n(this,h);c(this,s);const a=localStorage.getItem(e);if(a&&[h,r].includes(a)){this.mode=a;this.permanent=true}if(this.permanent&&!a){localStorage.setItem(e,this.mode)}const l=[h,r].includes(a);if(this.permanent&&a){this.o()}else{if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches){this.mode=r;this.o()}if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches){this.mode=h;this.o()}}if(!this.permanent&&!l){window.matchMedia("(prefers-color-scheme: light)").onchange=t=>{this.mode=t.matches?h:r;this.o()};window.matchMedia("(prefers-color-scheme: dark)").onchange=t=>{this.mode=t.matches?r:h;this.o()}}const d=new MutationObserver(((s,h)=>{this.mode=t.documentElement.dataset.colorMode;if(this.permanent&&l){localStorage.setItem(e,this.mode);this.i(i,{permanent:this.permanent})}this.h();this.i(o,{colorScheme:this.mode})}));d.observe(t.documentElement,{attributes:true});this.i(o,{colorScheme:this.mode});this.h()}attributeChangedCallback(t,s,o){if(t==="mode"&&s!==o&&[h,r].includes(o)){const t=localStorage.getItem(e);if(this.mode===t){this.mode=o;this.h();this.o()}else if(this.mode&&this.mode!==t){this.h();this.o()}}else if((t===h||t===r)&&s!==o){this.h()}if(t==="permanent"&&typeof this.permanent==="boolean"){this.permanent?localStorage.setItem(e,this.mode):localStorage.removeItem(e)}}o(){t.documentElement.setAttribute("data-color-mode",this.mode)}h(){this.icon.textContent=this.mode===h?"🌒":"🌞";this.text.textContent=this.mode===h?this.getAttribute(r):this.getAttribute(h)}t(){var s=this.attachShadow({mode:"open"});this.label=t.createElement("span");this.label.setAttribute("class","wrapper");this.label.onclick=()=>{this.mode=this.mode===h?r:h;if(this.permanent){localStorage.setItem(e,this.mode)}this.o();this.h()};s.appendChild(this.label);this.icon=t.createElement("span");this.label.appendChild(this.icon);this.text=t.createElement("span");this.label.appendChild(this.text);const o=`
[data-color-mode*='dark'], [data-color-mode*='dark'] body {
  color-scheme: dark;
  --color-theme-bg: #0d1117;
  --color-theme-text: #c9d1d9;
  background-color: var(--color-theme-bg);
  color: var(--color-theme-text);
}

[data-color-mode*='light'], [data-color-mode*='light'] body {
  color-scheme: light;
  --color-theme-bg: #fff;
  --color-theme-text: #24292f;
  background-color: var(--color-theme-bg);
  color: var(--color-theme-text);
}`;const i="_dark_mode_style_";const n=t.getElementById(i);if(!n){var c=t.createElement("style");c.id=i;c.textContent=o;t.head.appendChild(c)}var a=t.createElement("style");a.textContent=`
    .wrapper { cursor: pointer; user-select: none; position: relative; }
    .wrapper > span + span { margin-left: .4rem; }
    `;s.appendChild(a)}i(t,e){this.dispatchEvent(new CustomEvent(t,{bubbles:true,composed:true,detail:e}))}}customElements.define("dark-mode",a);</script><script>const __TEMPLATE__ = document.createElement('template');
__TEMPLATE__.innerHTML = `
<style>

markdown-style h1:hover a.anchor .octicon-link:before,
markdown-style h2:hover a.anchor .octicon-link:before,
markdown-style h3:hover a.anchor .octicon-link:before,
markdown-style h4:hover a.anchor .octicon-link:before,
markdown-style h5:hover a.anchor .octicon-link:before,
markdown-style h6:hover a.anchor .octicon-link:before {
  width: 16px;
  height: 16px;
  content: ' ';
  display: inline-block;
  background-color: currentColor;
  -webkit-mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
  mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
}
markdown-style[theme*='light'] { --color-prettylights-syntax-comment: #6e7781; --color-prettylights-syntax-constant: #0550ae; --color-prettylights-syntax-entity: #8250df; --color-prettylights-syntax-storage-modifier-import: #24292f; --color-prettylights-syntax-entity-tag: #116329; --color-prettylights-syntax-keyword: #cf222e; --color-prettylights-syntax-string: #0a3069; --color-prettylights-syntax-variable: #953800; --color-prettylights-syntax-brackethighlighter-unmatched: #82071e; --color-prettylights-syntax-invalid-illegal-text: #f6f8fa; --color-prettylights-syntax-invalid-illegal-bg: #82071e; --color-prettylights-syntax-carriage-return-text: #f6f8fa; --color-prettylights-syntax-carriage-return-bg: #cf222e; --color-prettylights-syntax-string-regexp: #116329; --color-prettylights-syntax-markup-list: #3b2300; --color-prettylights-syntax-markup-heading: #0550ae; --color-prettylights-syntax-markup-italic: #24292f; --color-prettylights-syntax-markup-bold: #24292f; --color-prettylights-syntax-markup-deleted-text: #82071e; --color-prettylights-syntax-markup-deleted-bg: #FFEBE9; --color-prettylights-syntax-markup-inserted-text: #116329; --color-prettylights-syntax-markup-inserted-bg: #dafbe1; --color-prettylights-syntax-markup-changed-text: #953800; --color-prettylights-syntax-markup-changed-bg: #ffd8b5; --color-prettylights-syntax-markup-ignored-text: #eaeef2; --color-prettylights-syntax-markup-ignored-bg: #0550ae; --color-prettylights-syntax-meta-diff-range: #8250df; --color-prettylights-syntax-brackethighlighter-angle: #57606a; --color-prettylights-syntax-sublimelinter-gutter-mark: #8c959f; --color-prettylights-syntax-constant-other-reference-link: #0a3069; --color-fg-default: #24292f; --color-fg-muted: #57606a; --color-fg-subtle: #6e7781; --color-canvas-default: #ffffff; --color-canvas-subtle: #f6f8fa; --color-border-default: #d0d7de; --color-border-muted: hsla(210,18%,87%,1); --color-neutral-muted: rgba(175,184,193,0.2); --color-accent-fg: #0969da; --color-accent-emphasis: #0969da; --color-attention-subtle: #fff8c5; --color-danger-fg: #cf222e; } markdown-style[theme*='dark'] { --color-prettylights-syntax-comment: #8b949e; --color-prettylights-syntax-constant: #79c0ff; --color-prettylights-syntax-entity: #d2a8ff; --color-prettylights-syntax-storage-modifier-import: #c9d1d9; --color-prettylights-syntax-entity-tag: #7ee787; --color-prettylights-syntax-keyword: #ff7b72; --color-prettylights-syntax-string: #a5d6ff; --color-prettylights-syntax-variable: #ffa657; --color-prettylights-syntax-brackethighlighter-unmatched: #f85149; --color-prettylights-syntax-invalid-illegal-text: #f0f6fc; --color-prettylights-syntax-invalid-illegal-bg: #8e1519; --color-prettylights-syntax-carriage-return-text: #f0f6fc; --color-prettylights-syntax-carriage-return-bg: #b62324; --color-prettylights-syntax-string-regexp: #7ee787; --color-prettylights-syntax-markup-list: #f2cc60; --color-prettylights-syntax-markup-heading: #1f6feb; --color-prettylights-syntax-markup-italic: #c9d1d9; --color-prettylights-syntax-markup-bold: #c9d1d9; --color-prettylights-syntax-markup-deleted-text: #ffdcd7; --color-prettylights-syntax-markup-deleted-bg: #67060c; --color-prettylights-syntax-markup-inserted-text: #aff5b4; --color-prettylights-syntax-markup-inserted-bg: #033a16; --color-prettylights-syntax-markup-changed-text: #ffdfb6; --color-prettylights-syntax-markup-changed-bg: #5a1e02; --color-prettylights-syntax-markup-ignored-text: #c9d1d9; --color-prettylights-syntax-markup-ignored-bg: #1158c7; --color-prettylights-syntax-meta-diff-range: #d2a8ff; --color-prettylights-syntax-brackethighlighter-angle: #8b949e; --color-prettylights-syntax-sublimelinter-gutter-mark: #484f58; --color-prettylights-syntax-constant-other-reference-link: #a5d6ff; --color-fg-default: #c9d1d9; --color-fg-muted: #8b949e; --color-fg-subtle: #484f58; --color-canvas-default: #0d1117; --color-canvas-subtle: #161b22; --color-border-default: #30363d; --color-border-muted: #21262d; --color-neutral-muted: rgba(110,118,129,0.4); --color-accent-fg: #58a6ff; --color-accent-emphasis: #1f6feb; --color-attention-subtle: rgba(187,128,9,0.15); --color-danger-fg: #f85149; } markdown-style { display: block; -webkit-text-size-adjust: 100%; font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"; font-size: 16px; line-height: 1.5; word-wrap: break-word; color: var(--color-fg-default); background-color: var(--color-canvas-default); } markdown-style details, markdown-style figcaption, markdown-style figure { display: block; } markdown-style summary { display: list-item; } markdown-style [hidden] { display: none !important; } markdown-style a { background-color: transparent; color: var(--color-accent-fg); text-decoration: none; } markdown-style a:active, markdown-style a:hover { outline-width: 0; } markdown-style abbr[title] { border-bottom: none; text-decoration: underline dotted; } markdown-style b, markdown-style strong { font-weight: 600; } markdown-style dfn { font-style: italic; } markdown-style h1 { margin: .67em 0; font-weight: 600; padding-bottom: .3em; font-size: 2em; border-bottom: 1px solid var(--color-border-muted); } markdown-style mark { background-color: var(--color-attention-subtle); color: var(--color-text-primary); } markdown-style small { font-size: 90%; } markdown-style sub, markdown-style sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; } markdown-style sub { bottom: -0.25em; } markdown-style sup { top: -0.5em; } markdown-style img { border-style: none; max-width: 100%; box-sizing: content-box; background-color: var(--color-canvas-default); } markdown-style code, markdown-style kbd, markdown-style pre, markdown-style samp { font-family: monospace,monospace; font-size: 1em; } markdown-style figure { margin: 1em 40px; } markdown-style hr { box-sizing: content-box; overflow: hidden; background: transparent; border-bottom: 1px solid var(--color-border-muted); height: .25em; padding: 0; margin: 24px 0; background-color: var(--color-border-default); border: 0; } markdown-style input { font: inherit; margin: 0; overflow: visible; font-family: inherit; font-size: inherit; line-height: inherit; } markdown-style [type=button], markdown-style [type=reset], markdown-style [type=submit] { -webkit-appearance: button; } markdown-style [type=button]::-moz-focus-inner, markdown-style [type=reset]::-moz-focus-inner, markdown-style [type=submit]::-moz-focus-inner { border-style: none; padding: 0; } markdown-style [type=button]:-moz-focusring, markdown-style [type=reset]:-moz-focusring, markdown-style [type=submit]:-moz-focusring { outline: 1px dotted ButtonText; } markdown-style [type=checkbox], markdown-style [type=radio] { box-sizing: border-box; padding: 0; } markdown-style [type=number]::-webkit-inner-spin-button, markdown-style [type=number]::-webkit-outer-spin-button { height: auto; } markdown-style [type=search] { -webkit-appearance: textfield; outline-offset: -2px; } markdown-style [type=search]::-webkit-search-cancel-button, markdown-style [type=search]::-webkit-search-decoration { -webkit-appearance: none; } markdown-style ::-webkit-input-placeholder { color: inherit; opacity: .54; } markdown-style ::-webkit-file-upload-button { -webkit-appearance: button; font: inherit; } markdown-style a:hover { text-decoration: underline; } markdown-style hr::before { display: table; content: ""; } markdown-style hr::after { display: table; clear: both; content: ""; } markdown-style table { border-spacing: 0; border-collapse: collapse; display: block; width: max-content; max-width: 100%; overflow: auto; } markdown-style td, markdown-style th { padding: 0; } markdown-style details summary { cursor: pointer; } markdown-style details:not([open])>*:not(summary) { display: none !important; } markdown-style kbd { display: inline-block; padding: 3px 5px; font: 11px ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace; line-height: 10px; color: var(--color-fg-default); vertical-align: middle; background-color: var(--color-canvas-subtle); border: solid 1px var(--color-neutral-muted); border-bottom-color: var(--color-neutral-muted); border-radius: 6px; box-shadow: inset 0 -1px 0 var(--color-neutral-muted); } markdown-style h1, markdown-style h2, markdown-style h3, markdown-style h4, markdown-style h5, markdown-style h6 { margin-top: 24px; margin-bottom: 16px; font-weight: 600; line-height: 1.25; } markdown-style h2 { font-weight: 600; padding-bottom: .3em; font-size: 1.5em; border-bottom: 1px solid var(--color-border-muted); } markdown-style h3 { font-weight: 600; font-size: 1.25em; } markdown-style h4 { font-weight: 600; font-size: 1em; } markdown-style h5 { font-weight: 600; font-size: .875em; } markdown-style h6 { font-weight: 600; font-size: .85em; color: var(--color-fg-muted); } markdown-style p { margin-top: 0; margin-bottom: 10px; } markdown-style blockquote { margin: 0; padding: 0 1em; color: var(--color-fg-muted); border-left: .25em solid var(--color-border-default); } markdown-style ul, markdown-style ol { margin-top: 0; margin-bottom: 0; padding-left: 2em; } markdown-style ol ol, markdown-style ul ol { list-style-type: lower-roman; } markdown-style ul ul ol, markdown-style ul ol ol, markdown-style ol ul ol, markdown-style ol ol ol { list-style-type: lower-alpha; } markdown-style dd { margin-left: 0; } markdown-style tt, markdown-style code { font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace; font-size: 12px; } markdown-style pre { margin-top: 0; margin-bottom: 0; font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace; font-size: 12px; word-wrap: normal; } markdown-style .octicon { display: inline-block; overflow: visible !important; vertical-align: text-bottom; fill: currentColor; } markdown-style ::placeholder { color: var(--color-fg-subtle); opacity: 1; } markdown-style input::-webkit-outer-spin-button, markdown-style input::-webkit-inner-spin-button { margin: 0; -webkit-appearance: none; appearance: none; }
markdown-style .token.comment, markdown-style .token.prolog, markdown-style .token.doctype, markdown-style .token.cdata { color: var(--color-prettylights-syntax-comment); } markdown-style .token.namespace { opacity: 0.7; } markdown-style .token.tag, markdown-style .token.selector, markdown-style .token.constant, markdown-style .token.symbol, markdown-style .token.deleted { color: var(--color-prettylights-syntax-entity-tag); } markdown-style .token.maybe-class-name { color: var(--color-prettylights-syntax-variable); } markdown-style .token.property-access, markdown-style .token.operator, markdown-style .token.boolean, markdown-style .token.number, markdown-style .token.selector markdown-style .token.class, markdown-style .token.attr-name, markdown-style .token.string, markdown-style .token.char, markdown-style .token.builtin { color: var(--color-prettylights-syntax-constant); } markdown-style .token.deleted { color: var(--color-prettylights-syntax-markup-deleted-text); } markdown-style .token.property { color: var(--color-prettylights-syntax-constant); } markdown-style .token.punctuation { color: var(--color-prettylights-syntax-markup-bold); } markdown-style .token.function { color: var(--color-prettylights-syntax-entity); } markdown-style .code-line .token.deleted { background-color: var(--color-prettylights-syntax-markup-deleted-bg); } markdown-style .token.inserted { color: var(--color-prettylights-syntax-markup-inserted-text); } markdown-style .code-line .token.inserted { background-color: var(--color-prettylights-syntax-markup-inserted-bg); } markdown-style .token.variable { color: var(--color-prettylights-syntax-constant); } markdown-style .token.entity, markdown-style .token.url, .language-css markdown-style .token.string, .style markdown-style .token.string { color: var(--color-prettylights-syntax-string); } markdown-style .token.color, markdown-style .token.atrule, markdown-style .token.attr-value, markdown-style .token.function, markdown-style .token.class-name { color: var(--color-prettylights-syntax-string); } markdown-style .token.rule, markdown-style .token.regex, markdown-style .token.important, markdown-style .token.keyword { color: var(--color-prettylights-syntax-keyword); } markdown-style .token.coord { color: var(--color-prettylights-syntax-meta-diff-range); } markdown-style .token.important, markdown-style .token.bold { font-weight: bold; } markdown-style .token.italic { font-style: italic; } markdown-style .token.entity { cursor: help; } markdown-style [data-catalyst] { display: block; }
markdown-style g-emoji { font-family: "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"; font-size: 1em; font-style: normal !important; font-weight: 400; line-height: 1; vertical-align: -0.075em; } markdown-style g-emoji img { width: 1em; height: 1em; } markdown-style::before { display: table; content: ""; } markdown-style::after { display: table; clear: both; content: ""; } markdown-style>*:first-child { margin-top: 0 !important; } markdown-style>*:last-child { margin-bottom: 0 !important; } markdown-style a:not([href]) { color: inherit; text-decoration: none; } markdown-style .absent { color: var(--color-danger-fg); } markdown-style .anchor { float: left; padding-right: 4px; margin-left: -20px; line-height: 1; } markdown-style .anchor:focus { outline: none; } markdown-style p, markdown-style blockquote, markdown-style ul, markdown-style ol, markdown-style dl, markdown-style table, markdown-style pre, markdown-style details { margin-top: 0; margin-bottom: 16px; } markdown-style blockquote>:first-child { margin-top: 0; } markdown-style blockquote>:last-child { margin-bottom: 0; } markdown-style sup>a::before { content: "["; } markdown-style sup>a::after { content: "]"; } markdown-style h1 .octicon-link, markdown-style h2 .octicon-link, markdown-style h3 .octicon-link, markdown-style h4 .octicon-link, markdown-style h5 .octicon-link, markdown-style h6 .octicon-link { color: var(--color-fg-default); vertical-align: middle; visibility: hidden; } markdown-style h1:hover .anchor, markdown-style h2:hover .anchor, markdown-style h3:hover .anchor, markdown-style h4:hover .anchor, markdown-style h5:hover .anchor, markdown-style h6:hover .anchor { text-decoration: none; } markdown-style h1:hover .anchor .octicon-link, markdown-style h2:hover .anchor .octicon-link, markdown-style h3:hover .anchor .octicon-link, markdown-style h4:hover .anchor .octicon-link, markdown-style h5:hover .anchor .octicon-link, markdown-style h6:hover .anchor .octicon-link { visibility: visible; } markdown-style h1 tt, markdown-style h1 code, markdown-style h2 tt, markdown-style h2 code, markdown-style h3 tt, markdown-style h3 code, markdown-style h4 tt, markdown-style h4 code, markdown-style h5 tt, markdown-style h5 code, markdown-style h6 tt, markdown-style h6 code { padding: 0 .2em; font-size: inherit; } markdown-style ul.no-list, markdown-style ol.no-list { padding: 0; list-style-type: none; } markdown-style ol[type="1"] { list-style-type: decimal; } markdown-style ol[type=a] { list-style-type: lower-alpha; } markdown-style ol[type=i] { list-style-type: lower-roman; } markdown-style div>ol:not([type]) { list-style-type: decimal; } markdown-style ul ul, markdown-style ul ol, markdown-style ol ol, markdown-style ol ul { margin-top: 0; margin-bottom: 0; } markdown-style li>p { margin-top: 16px; } markdown-style li+li { margin-top: .25em; } markdown-style dl { padding: 0; } markdown-style dl dt { padding: 0; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: 600; } markdown-style dl dd { padding: 0 16px; margin-bottom: 16px; } markdown-style table th { font-weight: 600; } markdown-style table th, markdown-style table td { padding: 6px 13px; border: 1px solid var(--color-border-default); } markdown-style table tr { background-color: var(--color-canvas-default); border-top: 1px solid var(--color-border-muted); } markdown-style table tr:nth-child(2n) { background-color: var(--color-canvas-subtle); } markdown-style table img { background-color: transparent; } markdown-style img[align=right] { padding-left: 20px; } markdown-style img[align=left] { padding-right: 20px; } markdown-style .emoji { max-width: none; vertical-align: text-top; background-color: transparent; } markdown-style span.frame { display: block; overflow: hidden; } markdown-style span.frame>span { display: block; float: left; width: auto; padding: 7px; margin: 13px 0 0; overflow: hidden; border: 1px solid var(--color-border-default); } markdown-style span.frame span img { display: block; float: left; } markdown-style span.frame span span { display: block; padding: 5px 0 0; clear: both; color: var(--color-fg-default); } markdown-style span.align-center { display: block; overflow: hidden; clear: both; } markdown-style span.align-center>span { display: block; margin: 13px auto 0; overflow: hidden; text-align: center; } markdown-style span.align-center span img { margin: 0 auto; text-align: center; } markdown-style span.align-right { display: block; overflow: hidden; clear: both; } markdown-style span.align-right>span { display: block; margin: 13px 0 0; overflow: hidden; text-align: right; } markdown-style span.align-right span img { margin: 0; text-align: right; } markdown-style span.float-left { display: block; float: left; margin-right: 13px; overflow: hidden; } markdown-style span.float-left span { margin: 13px 0 0; } markdown-style span.float-right { display: block; float: right; margin-left: 13px; overflow: hidden; } markdown-style span.float-right>span { display: block; margin: 13px auto 0; overflow: hidden; text-align: right; } markdown-style code, markdown-style tt { padding: .2em .4em; margin: 0; font-size: 85%; background-color: var(--color-neutral-muted); border-radius: 6px; } markdown-style code br, markdown-style tt br { display: none; } markdown-style del code { text-decoration: inherit; } markdown-style pre code { font-size: 100%; } markdown-style pre>code { padding: 0; margin: 0; word-break: normal; white-space: pre; background: transparent; border: 0; } markdown-style .highlight { margin-bottom: 16px; } markdown-style .highlight pre { margin-bottom: 0; word-break: normal; } markdown-style .highlight pre, markdown-style pre { position: relative; padding: 16px; overflow: auto; font-size: 85%; line-height: 1.45; background-color: var(--color-canvas-subtle); border-radius: 6px; } markdown-style pre code, markdown-style pre tt { display: inline; max-width: auto; padding: 0; margin: 0; overflow: visible; line-height: inherit; word-wrap: normal; background-color: transparent; border: 0; } markdown-style .csv-data td, markdown-style .csv-data th { padding: 5px; overflow: hidden; font-size: 12px; line-height: 1; text-align: left; white-space: nowrap; } markdown-style .csv-data .blob-num { padding: 10px 8px 9px; text-align: right; background: var(--color-canvas-default); border: 0; } markdown-style .csv-data tr { border-top: 0; } markdown-style .csv-data th { font-weight: 600; background: var(--color-canvas-subtle); border-top: 0; } markdown-style .footnotes { font-size: 12px; color: var(--color-fg-muted); border-top: 1px solid var(--color-border-default); } markdown-style .footnotes ol { padding-left: 16px; } markdown-style .footnotes li { position: relative; } markdown-style .footnotes li:target::before { position: absolute; top: -8px; right: -8px; bottom: -8px; left: -24px; pointer-events: none; content: ""; border: 2px solid var(--color-accent-emphasis); border-radius: 6px; } markdown-style .footnotes li:target { color: var(--color-fg-default); } markdown-style .footnotes .data-footnote-backref g-emoji { font-family: monospace; } markdown-style .task-list-item { list-style-type: none; } markdown-style .task-list-item label { font-weight: 400; } markdown-style .task-list-item.enabled label { cursor: pointer; } markdown-style .task-list-item+.task-list-item { margin-top: 3px; } markdown-style .task-list-item .handle { display: none; } markdown-style .task-list-item-checkbox, markdown-style input[type="checkbox"] { margin: 0 .2em .25em -1.6em; vertical-align: middle; } markdown-style .contains-task-list:dir(rtl) .task-list-item-checkbox, markdown-style .contains-task-list:dir(rtl) input[type="checkbox"] { margin: 0 -1.6em .25em .2em; } markdown-style ::-webkit-calendar-picker-indicator { filter: invert(50%); }
</style>
<slot></slot>
`;
class MarkdownStyle extends HTMLElement {
    constructor() {
        super();
        this.initTheme = this.getAttribute('theme');
        this.shadow = this.attachShadow({ mode: 'open' });
        this.shadow.appendChild(__TEMPLATE__.content.cloneNode(true));
        this.setTheme();
        const style = Array.prototype.slice
            .call(this.shadow.children)
            .find((item) => item.tagName === 'STYLE');
        if (style) {
            const id = '__MARKDOWN_STYLE__';
            const findStyle = document.getElementById(id);
            if (!findStyle) {
                style.id = id;
                document.head.append(style);
            }
        }
    }
    setTheme() {
        if (!this.initTheme) {
            const { colorMode } = document.documentElement.dataset;
            this.theme = colorMode;
            if (this.theme === 'undefined') {
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    this.theme = 'dark';
                }
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
                    this.theme = 'light';
                }
            }
        }
    }
    connectedCallback() {
        this.installStringReflection('theme');
        if (!this.initTheme) {
            this.setTheme();
            const observer = new MutationObserver((mutationsList, observer) => {
                this.theme = document.documentElement.dataset.colorMode;
                this.setTheme();
            });
            // Start observing the target node with the above configuration
            observer.observe(document.documentElement, { attributes: true });
            window.matchMedia('(prefers-color-scheme: light)').onchange = (event) => {
                this.theme = event.matches ? 'light' : 'dark';
                this.setTheme();
            };
            window.matchMedia('(prefers-color-scheme: dark)').onchange = (event) => {
                this.theme = event.matches ? 'dark' : 'light';
                this.setTheme();
            };
        }
    }
    /**
     * See https://html.spec.whatwg.org/multipage/common-dom-interfaces.html
     * #reflecting-content-attributes-in-idl-attributes.
     */
    installStringReflection(attrName, propName = attrName) {
        Object.defineProperty(this, propName, {
            enumerable: true,
            get() {
                const value = this.getAttribute(attrName);
                return value === null ? '' : value;
            },
            set(v) {
                this.setAttribute(attrName, v);
            },
        });
    }
}
customElements.define('markdown-style', MarkdownStyle);
</script><markdown-style style="max-width: 960px; margin: 0 auto 60px auto; padding: 8px" class="markdown-body">
    <p align="center">
      <img width="130" align="center" src="img/logo.svg">
    </p>
    <h1 align="center" id="docker入门教程"><a class="anchor" aria-hidden="true" tabindex="-1" href="#docker入门教程"><span class="octicon octicon-link"></span></a>Docker入门教程</h1>
    <p>Docker 是一个开源的应用容器引擎，而一个<ruby>容器<rt>containers</rt></ruby>其实是一个虚拟化的独立的环境，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。</p>
    <ul>
      <li>Docker 的局限性之一，它只能用在 64 位的操作系统上。</li>
    </ul>
    <h1 id="目录"><a class="anchor" aria-hidden="true" tabindex="-1" href="#目录"><span class="octicon octicon-link"></span></a>目录</h1><!-- TOC -->
    <ul>
      <li><a href="#%E6%96%B0%E7%89%88%E6%9C%AC%E5%AE%89%E8%A3%85">新版本安装</a></li>
      <li><a href="#%E6%97%A7%E7%89%88%E6%9C%AC%E5%AE%89%E8%A3%85">旧版本安装</a></li>
      <li><a href="#%E5%91%BD%E4%BB%A4%E4%BB%8B%E7%BB%8D">命令介绍</a></li>
      <li><a href="#%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86">服务管理</a></li>
      <li><a href="#%E9%95%9C%E5%83%8F%E7%AE%A1%E7%90%86">镜像管理</a>
        <ul>
          <li><a href="#%E9%80%9A%E8%BF%87%E5%AE%B9%E5%99%A8%E5%88%9B%E5%BB%BA%E9%95%9C%E5%83%8F">通过容器创建镜像</a></li>
          <li><a href="#%E9%80%9A%E8%BF%87dockerfile%E5%88%9B%E5%BB%BA%E9%95%9C%E5%83%8F">通过Dockerfile创建镜像</a></li>
          <li><a href="#%E5%8F%91%E5%B8%83%E8%87%AA%E5%B7%B1%E7%9A%84%E9%95%9C%E5%83%8F">发布自己的镜像</a></li>
          <li><a href="#%E9%95%9C%E5%83%8F%E4%B8%AD%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6">镜像中安装软件</a></li>
        </ul>
      </li>
      <li><a href="#%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86">容器管理</a>
        <ul>
          <li><a href="#%E5%AE%B9%E5%99%A8%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86">容器服务管理</a></li>
          <li><a href="#%E8%BF%9B%E5%85%A5%E5%AE%B9%E5%99%A8">进入容器</a></li>
        </ul>
      </li>
      <li><a href="#%E6%96%87%E4%BB%B6%E6%8B%B7%E8%B4%9D">文件拷贝</a></li>
      <li><a href="#docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%E6%90%AD%E5%BB%BA">Docker私有仓库搭建</a>
        <ul>
          <li><a href="#registry"><code>registry</code></a></li>
          <li><a href="#harbor"><code>Harbor</code></a></li>
        </ul>
      </li>
      <li><a href="#%E4%BD%BF%E7%94%A8docker%E5%AE%9E%E6%88%98">使用 Docker 实战</a></li>
      <li><a href="#docker-rest-api">Docker REST API</a>
        <ul>
          <li><a href="#nginx"><code>Nginx</code></a></li>
          <li><a href="#mysql"><code>MySQL</code></a></li>
          <li><a href="#postgres"><code>PostgreSQL</code></a></li>
          <li><a href="#redis"><code>Redis</code></a></li>
          <li><a href="#elasticsearch"><code>Elasticsearch</code></a></li>
          <li><a href="#gitlab"><code>Gitlab</code></a></li>
          <li><a href="#rocketchat"><code>Rocket.Chat</code></a></li>
          <li><a href="#rancher"><code>Rancher</code></a></li>
          <li><a href="#portainer"><code>Portainer</code></a></li>
          <li><a href="#sourcegraph"><code>Sourcegraph</code></a></li>
          <li><a href="#Mattermost"><code>Mattermost</code></a></li>
          <li><a href="#humpback"><code>Humpback</code></a></li>
          <li><a href="#seafile"><code>Seafile</code></a></li>
          <li><a href="#nps"><code>NPS</code></a></li>
          <li><a href="#%E6%9B%B4%E5%A4%9A">更多</a></li>
        </ul>
      </li>
      <li><a href="#%E5%8D%B8%E8%BD%BD%E6%97%A7%E7%9A%84%E7%89%88%E6%9C%AC">卸载旧的版本</a></li>
      <li><a href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">错误处理</a></li>
      <li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">参考资料</a>
        <ul>
          <li><a href="#%E5%AE%98%E6%96%B9%E8%8B%B1%E6%96%87%E8%B5%84%E6%BA%90">官方英文资源</a></li>
          <li><a href="#%E4%B8%AD%E6%96%87%E8%B5%84%E6%BA%90">中文资源</a></li>
          <li><a href="#%E5%85%B6%E5%AE%83%E8%B5%84%E6%BA%90">其它资源</a></li>
        </ul>
      </li>
    </ul><!-- /TOC -->
    <p>Docker 从 <code>1.13</code> 版本之后采用时间线的方式作为版本号，分为社区版 <code>CE</code> 和企业版 <code>EE</code>，社区版是免费提供给个人开发者和小型团体使用的，企业版会提供额外的收费服务，比如经过官方测试认证过的基础设施、容器、插件等。</p>
    <p>社区版按照 <code>stable</code> 和 <code>edge</code> 两种方式发布，每个季度更新 <code>stable</code> 版本，如 <code>17.06</code>，<code>17.09</code>；每个月份更新 <code>edge</code> 版本，如<code>17.09</code>，<code>17.10</code>。</p>
    <p>下面教程运行在 <code>Centos</code> 中</p>
    <h2 id="新版本安装"><a class="anchor" aria-hidden="true" tabindex="-1" href="#新版本安装"><span class="octicon octicon-link"></span></a>新版本安装</h2>
    <p>Docker 官方的安装教程，<a href="https://docs.docker.com/install/linux/docker-ce/centos/">在这里</a>。</p>
    <p>安装一些必要的系统工具</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">sudo</span> yum <span class="token function">install</span> -y yum-utils device-mapper-persistent-data lvm2
</span></code><div onclick="copied(this)" data-code="sudo yum install -y yum-utils device-mapper-persistent-data lvm2
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>添加软件源信息</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># docker 官方源</span>
</span><span class="code-line"><span class="token function">sudo</span> yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
</span><span class="code-line"><span class="token comment"># 阿里云源</span>
</span><span class="code-line"><span class="token function">sudo</span> yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
</span></code><div onclick="copied(this)" data-code="# docker 官方源
sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
# 阿里云源
sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>可选：启用 <code>edge</code> 和 <code>test</code> 存储库。 这些存储库包含在上面的 <code>docker.repo</code> 文件中，但默认情况下处于禁用状态。您可以将它们与稳定存储库一起启用。</p>
    <pre><code class="code-highlight"><span class="code-line">$ sudo yum-config-manager --enable docker-ce-edge
</span><span class="code-line">$ sudo yum-config-manager --enable docker-ce-test
</span></code><div onclick="copied(this)" data-code="$ sudo yum-config-manager --enable docker-ce-edge
$ sudo yum-config-manager --enable docker-ce-test
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>您可以通过使用 <code>--disable</code> 标志运行 <code>yum-config-manager</code> 命令来禁用边缘或测试存储库。 要重新启用它，请使用 <code>--enable</code> 标志。 以下命令禁用 <code>edge</code> 存储库:</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">$ <span class="token function">sudo</span> yum-config-manager --disable docker-ce-edge
</span><span class="code-line">$ <span class="token function">sudo</span> yum-config-manager --disable docker-ce-test
</span></code><div onclick="copied(this)" data-code="$ sudo yum-config-manager --disable docker-ce-edge
$ sudo yum-config-manager --disable docker-ce-test
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>安装 Docker-ce</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># 安装前可以先更新 yum 缓存：</span>
</span><span class="code-line"><span class="token function">sudo</span> yum makecache fast
</span><span class="code-line"><span class="token comment"># 安装 Docker-ce</span>
</span><span class="code-line"><span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce
</span></code><div onclick="copied(this)" data-code="# 安装前可以先更新 yum 缓存：
sudo yum makecache fast
# 安装 Docker-ce
sudo yum install docker-ce
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>如果你想安装特定 <code>docker-ce</code> 版本，先列出 repo 中可用版本，然后选择安装</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">$ yum list docker-ce --showduplicates <span class="token operator">|</span> <span class="token function">sort</span> -r
</span><span class="code-line"><span class="token comment"># docker-ce.x86_64       18.06.1.ce-3.el7              docker-ce-stable</span>
</span><span class="code-line"><span class="token comment"># docker-ce.x86_64       18.06.1.ce-3.el7              @docker-ce-stable</span>
</span><span class="code-line"><span class="token comment"># docker-ce.x86_64       18.06.0.ce-3.el7              docker-ce-stable</span>
</span><span class="code-line"><span class="token comment"># docker-ce.x86_64       18.03.1.ce-1.el7.centos       docker-ce-stable</span>
</span><span class="code-line"><span class="token comment"># docker-ce.x86_64       18.03.0.ce-1.el7.centos       docker-ce-stable</span>
</span><span class="code-line"><span class="token comment"># docker-ce.x86_64       17.12.1.ce-1.el7.centos       docker-ce-stable</span>
</span><span class="code-line"><span class="token comment"># 选择版本安装</span>
</span><span class="code-line">$ <span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce-<span class="token operator">&#x3C;</span>VERSION STRING<span class="token operator">></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 选择安装 docker-ce-18.06.1.ce</span>
</span><span class="code-line">$ <span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce-18.06.1.ce
</span></code><div onclick="copied(this)" data-code="$ yum list docker-ce --showduplicates | sort -r
# docker-ce.x86_64       18.06.1.ce-3.el7              docker-ce-stable
# docker-ce.x86_64       18.06.1.ce-3.el7              @docker-ce-stable
# docker-ce.x86_64       18.06.0.ce-3.el7              docker-ce-stable
# docker-ce.x86_64       18.03.1.ce-1.el7.centos       docker-ce-stable
# docker-ce.x86_64       18.03.0.ce-1.el7.centos       docker-ce-stable
# docker-ce.x86_64       17.12.1.ce-1.el7.centos       docker-ce-stable
# 选择版本安装
$ sudo yum install docker-ce-<VERSION STRING>

# 选择安装 docker-ce-18.06.1.ce
$ sudo yum install docker-ce-18.06.1.ce
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>启动 Docker 后台服务</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">$ <span class="token function">sudo</span> systemctl start <span class="token function">docker</span>
</span></code><div onclick="copied(this)" data-code="$ sudo systemctl start docker
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>通过运行 <code>hello-world</code> 镜像，验证是否正确安装了 <code>docker</code>。</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">$ <span class="token function">docker</span> run hello-world
</span></code><div onclick="copied(this)" data-code="$ docker run hello-world
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="旧版本安装"><a class="anchor" aria-hidden="true" tabindex="-1" href="#旧版本安装"><span class="octicon octicon-link"></span></a>旧版本安装</h2>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">yum <span class="token function">install</span> <span class="token function">docker</span>        <span class="token comment"># CentOS 中安装</span>
</span><span class="code-line"><span class="token function">apt-get</span> <span class="token function">install</span> docker-ce <span class="token comment"># Ubuntu 中安装</span>
</span><span class="code-line">pacman -S <span class="token function">docker</span>          <span class="token comment"># Arch 中安装</span>
</span><span class="code-line">emerge --ask <span class="token function">docker</span>       <span class="token comment"># Gentoo 中安装</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#=====================</span>
</span><span class="code-line"><span class="token function">docker</span> version      <span class="token comment"># 通过查看版本，检查安装是否成功</span>
</span><span class="code-line"><span class="token comment"># Client:</span>
</span><span class="code-line"><span class="token comment">#  Version:         1.12.6</span>
</span><span class="code-line"><span class="token comment">#  API version:     1.24</span>
</span><span class="code-line"><span class="token comment">#  Package version: docker-1.12.6-55.gitc4618fb.el7.centos.x86_64</span>
</span><span class="code-line"><span class="token comment">#  Go version:      go1.8.3</span>
</span><span class="code-line"><span class="token comment">#  Git commit:      c4618fb/1.12.6</span>
</span><span class="code-line"><span class="token comment">#  Built:           Thu Sep 21 22:33:52 2017</span>
</span><span class="code-line"><span class="token comment">#  OS/Arch:         linux/amd64</span>
</span><span class="code-line"><span class="token comment"># </span>
</span><span class="code-line"><span class="token comment"># Server:</span>
</span><span class="code-line"><span class="token comment">#  Version:         1.12.6</span>
</span><span class="code-line"><span class="token comment">#  API version:     1.24</span>
</span><span class="code-line"><span class="token comment">#  Package version: docker-1.12.6-55.gitc4618fb.el7.centos.x86_64</span>
</span><span class="code-line"><span class="token comment">#  Go version:      go1.8.3</span>
</span><span class="code-line"><span class="token comment">#  Git commit:      c4618fb/1.12.6</span>
</span><span class="code-line"><span class="token comment">#  Built:           Thu Sep 21 22:33:52 2017</span>
</span><span class="code-line"><span class="token comment">#  OS/Arch:         linux/amd64</span>
</span></code><div onclick="copied(this)" data-code="yum install docker        # CentOS 中安装
apt-get install docker-ce # Ubuntu 中安装
pacman -S docker          # Arch 中安装
emerge --ask docker       # Gentoo 中安装

#=====================
docker version      # 通过查看版本，检查安装是否成功
# Client:
#  Version:         1.12.6
#  API version:     1.24
#  Package version: docker-1.12.6-55.gitc4618fb.el7.centos.x86_64
#  Go version:      go1.8.3
#  Git commit:      c4618fb/1.12.6
#  Built:           Thu Sep 21 22:33:52 2017
#  OS/Arch:         linux/amd64
# 
# Server:
#  Version:         1.12.6
#  API version:     1.24
#  Package version: docker-1.12.6-55.gitc4618fb.el7.centos.x86_64
#  Go version:      go1.8.3
#  Git commit:      c4618fb/1.12.6
#  Built:           Thu Sep 21 22:33:52 2017
#  OS/Arch:         linux/amd64
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="命令介绍"><a class="anchor" aria-hidden="true" tabindex="-1" href="#命令介绍"><span class="octicon octicon-link"></span></a>命令介绍</h2>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">$ <span class="token function">docker</span> --help
</span><span class="code-line">
</span><span class="code-line">管理命令:
</span><span class="code-line">  container   管理容器
</span><span class="code-line">  image       管理镜像
</span><span class="code-line">  network     管理网络
</span><span class="code-line">命令：
</span><span class="code-line">  attach      介入到一个正在运行的容器
</span><span class="code-line">  build       根据 Dockerfile 构建一个镜像
</span><span class="code-line">  commit      根据容器的更改创建一个新的镜像
</span><span class="code-line">  <span class="token function">cp</span>          在本地文件系统与容器中复制 文件/文件夹
</span><span class="code-line">  create      创建一个新容器
</span><span class="code-line">  <span class="token builtin class-name">exec</span>        在容器中执行一条命令
</span><span class="code-line">  images      列出镜像
</span><span class="code-line">  <span class="token function">kill</span>        杀死一个或多个正在运行的容器    
</span><span class="code-line">  logs        取得容器的日志
</span><span class="code-line">  pause       暂停一个或多个容器的所有进程
</span><span class="code-line">  <span class="token function">ps</span>          列出所有容器
</span><span class="code-line">  pull        拉取一个镜像或仓库到 registry
</span><span class="code-line">  push        推送一个镜像或仓库到 registry
</span><span class="code-line">  <span class="token function">rename</span>      重命名一个容器
</span><span class="code-line">  restart     重新启动一个或多个容器
</span><span class="code-line">  <span class="token function">rm</span>          删除一个或多个容器
</span><span class="code-line">  rmi         删除一个或多个镜像
</span><span class="code-line">  run         在一个新的容器中执行一条命令
</span><span class="code-line">  search      在 Docker Hub 中搜索镜像
</span><span class="code-line">  start       启动一个或多个已经停止运行的容器
</span><span class="code-line">  stats       显示一个容器的实时资源占用
</span><span class="code-line">  stop        停止一个或多个正在运行的容器
</span><span class="code-line">  tag         为镜像创建一个新的标签
</span><span class="code-line">  <span class="token function">top</span>         显示一个容器内的所有进程
</span><span class="code-line">  unpause     恢复一个或多个容器内所有被暂停的进程
</span></code><div onclick="copied(this)" data-code="$ docker --help

管理命令:
  container   管理容器
  image       管理镜像
  network     管理网络
命令：
  attach      介入到一个正在运行的容器
  build       根据 Dockerfile 构建一个镜像
  commit      根据容器的更改创建一个新的镜像
  cp          在本地文件系统与容器中复制 文件/文件夹
  create      创建一个新容器
  exec        在容器中执行一条命令
  images      列出镜像
  kill        杀死一个或多个正在运行的容器    
  logs        取得容器的日志
  pause       暂停一个或多个容器的所有进程
  ps          列出所有容器
  pull        拉取一个镜像或仓库到 registry
  push        推送一个镜像或仓库到 registry
  rename      重命名一个容器
  restart     重新启动一个或多个容器
  rm          删除一个或多个容器
  rmi         删除一个或多个镜像
  run         在一个新的容器中执行一条命令
  search      在 Docker Hub 中搜索镜像
  start       启动一个或多个已经停止运行的容器
  stats       显示一个容器的实时资源占用
  stop        停止一个或多个正在运行的容器
  tag         为镜像创建一个新的标签
  top         显示一个容器内的所有进程
  unpause     恢复一个或多个容器内所有被暂停的进程
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="服务管理"><a class="anchor" aria-hidden="true" tabindex="-1" href="#服务管理"><span class="octicon octicon-link"></span></a>服务管理</h2>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">service</span> <span class="token function">docker</span> start       <span class="token comment"># 启动 docker 服务，守护进程</span>
</span><span class="code-line"><span class="token function">service</span> <span class="token function">docker</span> stop        <span class="token comment"># 停止 docker 服务</span>
</span><span class="code-line"><span class="token function">service</span> <span class="token function">docker</span> status      <span class="token comment"># 查看 docker 服务状态</span>
</span><span class="code-line"><span class="token function">chkconfig</span> <span class="token function">docker</span> on        <span class="token comment"># 设置为开机启动</span>
</span></code><div onclick="copied(this)" data-code="service docker start       # 启动 docker 服务，守护进程
service docker stop        # 停止 docker 服务
service docker status      # 查看 docker 服务状态
chkconfig docker on        # 设置为开机启动
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="镜像管理"><a class="anchor" aria-hidden="true" tabindex="-1" href="#镜像管理"><span class="octicon octicon-link"></span></a>镜像管理</h2>
    <p>镜像可以看做我们平时装系统的镜像，里面就是一个运行环境。</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">docker</span> pull centos:latest  <span class="token comment"># 从docker.io中下载centos镜像到本地</span>
</span><span class="code-line"><span class="token function">docker</span> images              <span class="token comment"># 查看已下载的镜像</span>
</span><span class="code-line"><span class="token function">docker</span> rmi <span class="token punctuation">[</span>image_id<span class="token punctuation">]</span>      <span class="token comment"># 删除镜像，指定镜像id</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 删除所有镜像</span>
</span><span class="code-line"><span class="token comment"># none 默认为 docker.io</span>
</span><span class="code-line"><span class="token function">docker</span> rmi <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> images <span class="token operator">|</span> <span class="token function">grep</span> none <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $3}'</span> <span class="token operator">|</span> <span class="token function">sort</span> -r<span class="token variable">)</span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 连接进行进入命令行模式，exit命令退出。</span>
</span><span class="code-line"><span class="token function">docker</span> run -t -i nginx:latest /bin/bash
</span></code><div onclick="copied(this)" data-code="docker pull centos:latest  # 从docker.io中下载centos镜像到本地
docker images              # 查看已下载的镜像
docker rmi [image_id]      # 删除镜像，指定镜像id

# 删除所有镜像
# none 默认为 docker.io
docker rmi $(docker images | grep none | awk &#x27;{print $3}&#x27; | sort -r)

# 连接进行进入命令行模式，exit命令退出。
docker run -t -i nginx:latest /bin/bash
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="通过容器创建镜像"><a class="anchor" aria-hidden="true" tabindex="-1" href="#通过容器创建镜像"><span class="octicon octicon-link"></span></a>通过容器创建镜像</h3>
    <p>我们可以通过以下两种方式对镜像进行更改。</p>
    <ol>
      <li>从已经创建的容器中更新镜像，并且提交这个镜像</li>
      <li>使用 Dockerfile 指令来创建一个新的镜像</li>
    </ol>
    <p>下面通过已存在的容器创建一个新的镜像。</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">docker</span> commit -m<span class="token operator">=</span><span class="token string">"First Docker"</span> -a<span class="token operator">=</span><span class="token string">"wcjiang"</span> a6b0a6cfdacf wcjiang/nginx:v1.2.1
</span></code><div onclick="copied(this)" data-code="docker commit -m=&#x22;First Docker&#x22; -a=&#x22;wcjiang&#x22; a6b0a6cfdacf wcjiang/nginx:v1.2.1
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>上面命令参数说明：</p>
    <ul>
      <li><code>-m</code> 提交的描述信息</li>
      <li><code>-a</code> 指定镜像作者</li>
      <li><code>a6b0a6cfdacf</code> 记住这个是容器id，不是镜像id</li>
      <li><code>wcjiang/nginx:v1.2.1</code> 创建的目标镜像名</li>
    </ul>
    <h3 id="通过dockerfile创建镜像"><a class="anchor" aria-hidden="true" tabindex="-1" href="#通过dockerfile创建镜像"><span class="octicon octicon-link"></span></a>通过Dockerfile创建镜像</h3>
    <p>假设创建一个 node.js 镜像，首先在 node.js 项目根目录创建文件。</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">touch</span> Dockerfile .dockerignore
</span></code><div onclick="copied(this)" data-code="touch Dockerfile .dockerignore
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p><code>.dockerignore</code> 文件内容，下面代码表示，这三个路径要排除，不要打包进入 image 文件。如果你没有路径要排除，这个文件可以不新建。</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">.git
</span><span class="code-line">node_modules
</span><span class="code-line">npm-debug.log
</span></code><div onclick="copied(this)" data-code=".git
node_modules
npm-debug.log
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>Dockerfile 文件内容</p>
    <pre class="language-dockerfile"><code class="language-Dockerfile code-highlight"><span class="code-line"><span class="token instruction"><span class="token keyword">FROM</span> node:8.4</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> . /app</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm install --registry=https://registry.npm.taobao.org</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">EXPOSE</span> 3000</span>
</span></code><div onclick="copied(this)" data-code="FROM node:8.4
COPY . /app
WORKDIR /app
RUN npm install --registry=https://registry.npm.taobao.org
EXPOSE 3000
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <ul>
      <li><code>FROM node:8.4</code>：该 <code>image</code> 文件继承官方的 <code>node image</code>，冒号表示标签，这里标签是<code>8.4</code>，即<code>8.4</code>版本的 <code>node</code>。</li>
      <li><code>COPY . /app</code>：将当前目录下的所有文件（除了 <code>.dockerignore</code> 排除的路径），都拷贝进入 <code>image</code> 文件的 <code>/app</code> 目录。</li>
      <li><code>WORKDIR /app</code>：指定接下来的工作路径为<code>/app</code>。</li>
      <li><code>RUN npm install</code>：在/app目录下，运行 <code>npm install</code> 命令安装依赖。注意，安装后所有的依赖，都将打包进入 <code>image</code> 文件。</li>
      <li><code>EXPOSE 3000</code>：将容器 <code>3000</code> 端口暴露出来， 允许外部连接这个端口。</li>
    </ul>
    <p>有了 <code>Dockerfile</code> 文件以后，就可以使用 <code>docker image build</code> 命令创建 <code>image</code> 文件了。</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">$ <span class="token function">docker</span> image build -t koa-demo <span class="token builtin class-name">.</span>
</span><span class="code-line"><span class="token comment"># 或者</span>
</span><span class="code-line">$ <span class="token function">docker</span> image build -t koa-demo:0.0.1 <span class="token builtin class-name">.</span>
</span></code><div onclick="copied(this)" data-code="$ docker image build -t koa-demo .
# 或者
$ docker image build -t koa-demo:0.0.1 .
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>上面命令，<code>-t</code> 参数用来指定 <code>image</code> 文件的名字，后面还可以用冒号指定标签。如果不指定，默认的标签就是 <code>latest</code>。注意后面有个 <code>.</code>，表示 Dockerfile 文件所在的路径为当前路径</p>
    <h3 id="发布自己的镜像"><a class="anchor" aria-hidden="true" tabindex="-1" href="#发布自己的镜像"><span class="octicon octicon-link"></span></a>发布自己的镜像</h3>
    <ol>
      <li>在<a href="https://www.docker.com/">Docker</a> 注册账户，发布的镜像都在<a href="https://cloud.docker.com/repository/list">这个页面里</a>展示</li>
      <li>将上面做的镜像<code>nginx</code>，起个新的名字<code>nginx-test</code></li>
    </ol>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">docker</span> tag wcjiang/nginx:v1.2.1 wcjiang/nginx-test:lastest
</span></code><div onclick="copied(this)" data-code="docker tag wcjiang/nginx:v1.2.1 wcjiang/nginx-test:lastest
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <ol start="3">
      <li>登录docker</li>
    </ol>
    <pre><code class="code-highlight"><span class="code-line">docker login
</span></code><div onclick="copied(this)" data-code="docker login
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <ol start="4">
      <li>上传<code>nginx-test</code>镜像</li>
    </ol>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">docker</span> push wcjiang/nginx-test:lastest
</span><span class="code-line"><span class="token comment"># The push refers to a repository [docker.io/wcjiang/nginx-test]</span>
</span><span class="code-line"><span class="token comment"># 2f5c6a3c22e3: Mounted from wcjiang/nginx</span>
</span><span class="code-line"><span class="token comment"># cf516324493c: Mounted from wcjiang/nginx</span>
</span><span class="code-line"><span class="token comment"># lastest: digest: sha256:73ae804b2c60327d1269aa387cf782f664bc91da3180d10dbd49027d7adaa789 size: 736</span>
</span></code><div onclick="copied(this)" data-code="docker push wcjiang/nginx-test:lastest
# The push refers to a repository [docker.io/wcjiang/nginx-test]
# 2f5c6a3c22e3: Mounted from wcjiang/nginx
# cf516324493c: Mounted from wcjiang/nginx
# lastest: digest: sha256:73ae804b2c60327d1269aa387cf782f664bc91da3180d10dbd49027d7adaa789 size: 736
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="镜像中安装软件"><a class="anchor" aria-hidden="true" tabindex="-1" href="#镜像中安装软件"><span class="octicon octicon-link"></span></a>镜像中安装软件</h3>
    <p>通常情况下，使用docker官方镜像，如 mysql镜像，默认情况下镜像中啥软件也没有，通过下面命令安装你所需要的软件：</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># 第一次需要运行这个命令，确保源的索引是最新的</span>
</span><span class="code-line"><span class="token comment"># 同步 /etc/apt/sources.list 和 /etc/apt/sources.list.d 中列出的源的索引</span>
</span><span class="code-line"><span class="token function">apt-get</span> update
</span><span class="code-line"><span class="token comment"># 做过上面更新同步之后，可以运行下面的命令了</span>
</span><span class="code-line"><span class="token function">apt-get</span> <span class="token function">install</span> <span class="token function">vim</span>
</span></code><div onclick="copied(this)" data-code="# 第一次需要运行这个命令，确保源的索引是最新的
# 同步 /etc/apt/sources.list 和 /etc/apt/sources.list.d 中列出的源的索引
apt-get update
# 做过上面更新同步之后，可以运行下面的命令了
apt-get install vim
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>如果你安装了CentOS或者Ubuntu系统可以进入系统安装相关软件</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># 进入到centos7镜像系统</span>
</span><span class="code-line"><span class="token function">docker</span> run -i -t centos:7 /bin/bash
</span><span class="code-line">yum update
</span><span class="code-line">yum <span class="token function">install</span> <span class="token function">vim</span>
</span></code><div onclick="copied(this)" data-code="# 进入到centos7镜像系统
docker run -i -t centos:7 /bin/bash
yum update
yum install vim
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="容器管理"><a class="anchor" aria-hidden="true" tabindex="-1" href="#容器管理"><span class="octicon octicon-link"></span></a>容器管理</h2>
    <p>容器就像一个类的实例</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># 列出本机正在运行的容器</span>
</span><span class="code-line"><span class="token function">docker</span> container <span class="token function">ls</span>
</span><span class="code-line"><span class="token comment"># 列出本机所有容器，包括终止运行的容器</span>
</span><span class="code-line"><span class="token function">docker</span> container <span class="token function">ls</span> --all
</span><span class="code-line"><span class="token function">docker</span> start <span class="token punctuation">[</span>containerID/Names<span class="token punctuation">]</span> <span class="token comment"># 启动容器</span>
</span><span class="code-line"><span class="token function">docker</span> stop <span class="token punctuation">[</span>containerID/Names<span class="token punctuation">]</span>  <span class="token comment"># 停止容器</span>
</span><span class="code-line"><span class="token function">docker</span> <span class="token function">rm</span> <span class="token punctuation">[</span>containerID/Names<span class="token punctuation">]</span>    <span class="token comment"># 删除容器</span>
</span><span class="code-line"><span class="token function">docker</span> logs <span class="token punctuation">[</span>containerID/Names<span class="token punctuation">]</span>  <span class="token comment"># 查看日志</span>
</span><span class="code-line"><span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it <span class="token punctuation">[</span>containerID/Names<span class="token punctuation">]</span> /bin/bash  <span class="token comment"># 进入容器</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 从正在运行的 Docker 容器里面，将文件拷贝到本机，注意后面有个【点】拷贝到当前目录</span>
</span><span class="code-line"><span class="token function">docker</span> container <span class="token function">cp</span> <span class="token punctuation">[</span>containID<span class="token punctuation">]</span>:<span class="token punctuation">[</span>/path/to/file<span class="token punctuation">]</span> <span class="token builtin class-name">.</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">docker</span> run centos <span class="token builtin class-name">echo</span> <span class="token string">"hello world"</span>  <span class="token comment"># 在docker容器中运行hello world!</span>
</span><span class="code-line"><span class="token function">docker</span> run centos yum <span class="token function">install</span> -y <span class="token function">wget</span> <span class="token comment"># 在docker容器中，安装wget软件</span>
</span><span class="code-line"><span class="token function">docker</span> <span class="token function">ps</span>                             <span class="token comment"># 列出包括未运行的容器</span>
</span><span class="code-line"><span class="token function">docker</span> <span class="token function">ps</span> -a                          <span class="token comment"># 查看所有容器(包括正在运行和已停止的)</span>
</span><span class="code-line"><span class="token function">docker</span> logs my-nginx                  <span class="token comment"># 查看 my-nginx 容器日志</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">docker</span> run -i -t centos /bin/bash     <span class="token comment"># 启动一个容器</span>
</span><span class="code-line"><span class="token function">docker</span> inspect centos                 <span class="token comment"># 检查运行中的镜像</span>
</span><span class="code-line"><span class="token function">docker</span> commit 8bd centos              <span class="token comment"># 保存对容器的修改</span>
</span><span class="code-line"><span class="token function">docker</span> commit -m <span class="token string">"n changed"</span> my-nginx my-nginx-image <span class="token comment"># 使用已经存在的容器创建一个镜像</span>
</span><span class="code-line"><span class="token function">docker</span> inspect -f <span class="token punctuation">{</span><span class="token punctuation">{</span>.State.Pid<span class="token punctuation">}</span><span class="token punctuation">}</span> 44fc0f0582d9        <span class="token comment"># 获取id为 44fc0f0582d9 的PID进程编号</span>
</span><span class="code-line"><span class="token comment"># 下载指定版本容器镜像</span>
</span><span class="code-line"><span class="token function">docker</span> pull gitlab/gitlab-ce:11.2.3-ce.0
</span></code><div onclick="copied(this)" data-code="# 列出本机正在运行的容器
docker container ls
# 列出本机所有容器，包括终止运行的容器
docker container ls --all
docker start [containerID/Names] # 启动容器
docker stop [containerID/Names]  # 停止容器
docker rm [containerID/Names]    # 删除容器
docker logs [containerID/Names]  # 查看日志
docker exec -it [containerID/Names] /bin/bash  # 进入容器

# 从正在运行的 Docker 容器里面，将文件拷贝到本机，注意后面有个【点】拷贝到当前目录
docker container cp [containID]:[/path/to/file] .

docker run centos echo &#x22;hello world&#x22;  # 在docker容器中运行hello world!
docker run centos yum install -y wget # 在docker容器中，安装wget软件
docker ps                             # 列出包括未运行的容器
docker ps -a                          # 查看所有容器(包括正在运行和已停止的)
docker logs my-nginx                  # 查看 my-nginx 容器日志

docker run -i -t centos /bin/bash     # 启动一个容器
docker inspect centos                 # 检查运行中的镜像
docker commit 8bd centos              # 保存对容器的修改
docker commit -m &#x22;n changed&#x22; my-nginx my-nginx-image # 使用已经存在的容器创建一个镜像
docker inspect -f {{.State.Pid}} 44fc0f0582d9        # 获取id为 44fc0f0582d9 的PID进程编号
# 下载指定版本容器镜像
docker pull gitlab/gitlab-ce:11.2.3-ce.0
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="容器服务管理"><a class="anchor" aria-hidden="true" tabindex="-1" href="#容器服务管理"><span class="octicon octicon-link"></span></a>容器服务管理</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">docker</span> run -itd --name my-nginx2 nginx  <span class="token comment"># 通过nginx镜像，【创建】容器名为 my-nginx2 的容器</span>
</span><span class="code-line"><span class="token function">docker</span> start my-nginx --restart<span class="token operator">=</span>always  <span class="token comment"># 【启动策略】一个已经存在的容器启动添加策略</span>
</span><span class="code-line">    <span class="token comment"># no - 容器不重启</span>
</span><span class="code-line">    <span class="token comment"># on-failure - 容器推出状态非0时重启</span>
</span><span class="code-line">    <span class="token comment"># always - 始终重启</span>
</span><span class="code-line"><span class="token function">docker</span> start my-nginx             <span class="token comment"># 【启动】一个已经存在的容器</span>
</span><span class="code-line"><span class="token function">docker</span> restart my-nginx           <span class="token comment"># 【重启】容器</span>
</span><span class="code-line"><span class="token function">docker</span> stop my-nginx              <span class="token comment"># 【停止运行】一个容器</span>
</span><span class="code-line"><span class="token function">docker</span> <span class="token function">kill</span> my-nginx              <span class="token comment"># 【杀死】一个运行中的容器</span>
</span><span class="code-line"><span class="token function">docker</span> <span class="token function">rename</span> my-nginx new-nginx  <span class="token comment"># 【重命名】容器</span>
</span><span class="code-line"><span class="token function">docker</span> <span class="token function">rm</span> new-nginx               <span class="token comment"># 【删除】容器</span>
</span></code><div onclick="copied(this)" data-code="docker run -itd --name my-nginx2 nginx  # 通过nginx镜像，【创建】容器名为 my-nginx2 的容器
docker start my-nginx --restart=always  # 【启动策略】一个已经存在的容器启动添加策略
    # no - 容器不重启
    # on-failure - 容器推出状态非0时重启
    # always - 始终重启
docker start my-nginx             # 【启动】一个已经存在的容器
docker restart my-nginx           # 【重启】容器
docker stop my-nginx              # 【停止运行】一个容器
docker kill my-nginx              # 【杀死】一个运行中的容器
docker rename my-nginx new-nginx  # 【重命名】容器
docker rm new-nginx               # 【删除】容器
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="进入容器"><a class="anchor" aria-hidden="true" tabindex="-1" href="#进入容器"><span class="octicon octicon-link"></span></a>进入容器</h3>
    <ol>
      <li>创建一个守护状态的 Docker 容器</li>
    </ol>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">docker</span> run -itd my-nginx /bin/bash
</span></code><div onclick="copied(this)" data-code="docker run -itd my-nginx /bin/bash
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <ol start="2">
      <li>使用<code>docker ps</code>查看到该容器信息</li>
    </ol>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">docker</span> <span class="token function">ps</span>
</span><span class="code-line"><span class="token comment"># CONTAINER ID  IMAGE  COMMAND      CREATED          STATUS          PORTS    NAMES</span>
</span><span class="code-line"><span class="token comment"># 6bd0496da64f  nginx  "/bin/bash"  20 seconds ago   Up 18 seconds   80/tcp   high_shirley</span>
</span></code><div onclick="copied(this)" data-code="docker ps
# CONTAINER ID  IMAGE  COMMAND      CREATED          STATUS          PORTS    NAMES
# 6bd0496da64f  nginx  &#x22;/bin/bash&#x22;  20 seconds ago   Up 18 seconds   80/tcp   high_shirley
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <ol start="3">
      <li>使用<code>docker exec</code>命令进入一个已经在运行的容器</li>
    </ol>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it 6bd0496da64f /bin/bash
</span></code><div onclick="copied(this)" data-code="docker exec -it 6bd0496da64f /bin/bash
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>通常有下面几种方式进入Docker的容器，推荐使用 <code>exec</code>，使用 <code>attach</code> 一直进入失败。</p>
    <ul>
      <li>使用<code>docker attach</code></li>
      <li>使用<code>SSH</code> <a href="http://www.oschina.net/translate/why-you-dont-need-to-run-sshd-in-docker?cmp">为什么不需要在 Docker 容器中运行 sshd</a></li>
      <li>使用<code>nsenter</code>进入Docker容器，<a href="https://github.com/jpetazzo/nsenter">nsenter官方仓库</a></li>
      <li>使用<code>docker exec</code>，在<code>1.3.*</code>之后提供了一个新的命令<code>exec</code>用于进入容器</li>
    </ul>
    <h2 id="文件拷贝"><a class="anchor" aria-hidden="true" tabindex="-1" href="#文件拷贝"><span class="octicon octicon-link"></span></a>文件拷贝</h2>
    <p>从主机复制到容器 <code>sudo docker cp host_path containerID:container_path</code><br>从容器复制到主机 <code>sudo docker cp containerID:container_path host_path</code></p>
    <h2 id="docker私有仓库搭建"><a class="anchor" aria-hidden="true" tabindex="-1" href="#docker私有仓库搭建"><span class="octicon octicon-link"></span></a>Docker私有仓库搭建</h2>
    <p>通过官方提供的私有仓库镜像<code>registry</code>来搭建私有仓库。通过 <a href="https://humpback.github.io/">humpback</a> 快速搭建轻量级的Docker容器云管理平台。关于仓库配置说明请参见<a href="https://github.com/docker/distribution/blob/master/docs/configuration.md">configuration.md</a></p>
    <blockquote>
      <p>⚠️ 注意：也可以通过部署管理工具 <code>Harbor</code> 来部署 <code>registry</code></p>
    </blockquote>
    <p>除了 <a href="https://github.com/goharbor/harbor">Harbor</a> 还有 <a href="https://github.com/humpback/humpback">humpback</a> 和 <a href="https://github.com/rancher/rancher">rancher</a></p>
    <h3 id="registry"><a class="anchor" aria-hidden="true" tabindex="-1" href="#registry"><span class="octicon octicon-link"></span></a><code>registry</code></h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">docker</span> pull registry:2.6.2
</span></code><div onclick="copied(this)" data-code="docker pull registry:2.6.2
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>创建容器并运行，创建成功之后，可访问 <code>http://192.168.99.100:7000/v2/</code>，来检查仓库是否正常运行，当返回 <code>{}</code> 时，表示部署成功。</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">docker</span> run -d <span class="token punctuation">\</span>
</span><span class="code-line">  -p <span class="token number">5000</span>:5000 <span class="token punctuation">\</span>
</span><span class="code-line">  --restart<span class="token operator">=</span>always <span class="token punctuation">\</span>
</span><span class="code-line">  --name registry <span class="token punctuation">\</span>
</span><span class="code-line">  registry:2
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 自定义存储位置</span>
</span><span class="code-line"><span class="token function">docker</span> run -d <span class="token punctuation">\</span>
</span><span class="code-line">  -p <span class="token number">5000</span>:5000 <span class="token punctuation">\</span>
</span><span class="code-line">  --restart<span class="token operator">=</span>always <span class="token punctuation">\</span>
</span><span class="code-line">  --name registry <span class="token punctuation">\</span>
</span><span class="code-line">  -v <span class="token environment constant">$HOME</span>/_docker/registry:/var/lib/registry <span class="token punctuation">\</span>
</span><span class="code-line">  registry:2
</span><span class="code-line">
</span><span class="code-line"><span class="token function">docker</span> run -d -p <span class="token number">5000</span>:5000 --restart<span class="token operator">=</span>always --name registry <span class="token punctuation">\</span>
</span><span class="code-line">    -v <span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>/config.yml:/etc/docker/registry/config.yml <span class="token punctuation">\</span>
</span><span class="code-line">    registry:2
</span></code><div onclick="copied(this)" data-code="docker run -d \
  -p 5000:5000 \
  --restart=always \
  --name registry \
  registry:2

# 自定义存储位置
docker run -d \
  -p 5000:5000 \
  --restart=always \
  --name registry \
  -v $HOME/_docker/registry:/var/lib/registry \
  registry:2

docker run -d -p 5000:5000 --restart=always --name registry \
    -v &#x60;pwd&#x60;/config.yml:/etc/docker/registry/config.yml \
    registry:2
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>推送镜像到私有仓库</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># 从官方仓库拉取一个镜像</span>
</span><span class="code-line"><span class="token function">docker</span> pull nginx:1.13
</span><span class="code-line"><span class="token comment"># 为镜像 `nginx:1.13` 创建一个新标签 `192.168.31.69:7000/test-nginx:1.13`</span>
</span><span class="code-line"><span class="token function">docker</span> tag nginx:latest <span class="token number">192.168</span>.31.69:5000/test-nginx:1.13
</span><span class="code-line"><span class="token comment"># 推送到私有仓库中</span>
</span><span class="code-line"><span class="token function">docker</span> push <span class="token number">192.168</span>.31.69:5000/test-nginx:1.13
</span><span class="code-line"><span class="token comment"># The push refers to a repository [192.168.99.100:7000/test-nginx]</span>
</span><span class="code-line"><span class="token comment"># Get https://192.168.99.100:7000/v1/_ping: http: server gave HTTP response to HTTPS client</span>
</span></code><div onclick="copied(this)" data-code="# 从官方仓库拉取一个镜像
docker pull nginx:1.13
# 为镜像 &#x60;nginx:1.13&#x60; 创建一个新标签 &#x60;192.168.31.69:7000/test-nginx:1.13&#x60;
docker tag nginx:latest 192.168.31.69:5000/test-nginx:1.13
# 推送到私有仓库中
docker push 192.168.31.69:5000/test-nginx:1.13
# The push refers to a repository [192.168.99.100:7000/test-nginx]
# Get https://192.168.99.100:7000/v1/_ping: http: server gave HTTP response to HTTPS client
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>在推送到的时候报错误，默认是使用 <code>https</code> 提交，这个搭建的默认使用的是 <code>http</code>，解决方法两个：</p>
    <ol>
      <li>创建一个 <code>https</code> 映射</li>
      <li>将仓库地址加入到不安全的仓库列表中</li>
    </ol>
    <p>我们使用第二种方法，加入到不安全的仓库列表中，修改docker配置文件 <code>vi /etc/docker/daemon.json</code> 添加 <code>insecure-registries</code> 配置信息，如果 <a href="https://docs.docker.com/engine/reference/commandline/dockerd/#daemon-configuration-file">daemon.json</a> 文件不存在可以创建，关键配置项，将仓库将入到不安全的仓库列表中。</p>
    <pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token string-property property">"insecure-registries"</span><span class="token operator">:</span><span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token string">"192.168.31.69:5000"</span>
</span><span class="code-line">  <span class="token punctuation">]</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div onclick="copied(this)" data-code="{
  &#x22;insecure-registries&#x22;:[
    &#x22;192.168.31.69:5000&#x22;
  ]
}
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <blockquote>
      <p>如果是 macOS 可以通过 docker 客户端，<code>Preferences</code> => <code>Advanced</code> => <code>添加配置</code> => <code>Apply &#x26; Restart</code>，重启docker就可以了。</p>
    </blockquote>
    <p>重启服务 <code>service docker restart</code>，默认情况下 push 是会报如下错误的：</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">docker</span> push <span class="token number">192.168</span>.99.100:7000/test-nginx:1.13
</span><span class="code-line"><span class="token comment"># The push refers to a repository [192.168.99.100:7000/test-nginx]</span>
</span><span class="code-line"><span class="token comment"># a1a53f8d99b5: Retrying in 1 second</span>
</span><span class="code-line"><span class="token comment"># ...</span>
</span><span class="code-line"><span class="token comment"># received unexpected HTTP status: 500 Internal Server Error</span>
</span></code><div onclick="copied(this)" data-code="docker push 192.168.99.100:7000/test-nginx:1.13
# The push refers to a repository [192.168.99.100:7000/test-nginx]
# a1a53f8d99b5: Retrying in 1 second
# ...
# received unexpected HTTP status: 500 Internal Server Error
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>上面错误是 <code>SELinux</code> 强制访问控制安全系统，阻止导致的错误，通过下面方法禁用 SELinux 之后就可以 push 了。</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">setenforce <span class="token number">0</span>  
</span><span class="code-line">getenforce   
</span><span class="code-line"><span class="token comment"># Permissive  </span>
</span></code><div onclick="copied(this)" data-code="setenforce 0  
getenforce   
# Permissive  
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># 停止本地 registry</span>
</span><span class="code-line"><span class="token function">docker</span> container stop registry
</span><span class="code-line"><span class="token comment"># 要删除容器，请使用 docker container rm</span>
</span><span class="code-line"><span class="token function">docker</span> container stop registry <span class="token operator">&#x26;&#x26;</span> <span class="token function">docker</span> container <span class="token function">rm</span> -v registry
</span><span class="code-line"><span class="token comment"># 自定义存储位置</span>
</span></code><div onclick="copied(this)" data-code="# 停止本地 registry
docker container stop registry
# 要删除容器，请使用 docker container rm
docker container stop registry &#x26;&#x26; docker container rm -v registry
# 自定义存储位置
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="harbor"><a class="anchor" aria-hidden="true" tabindex="-1" href="#harbor"><span class="octicon octicon-link"></span></a><code>Harbor</code></h3>
    <p><a href="harbor.html">部署 registry 管理工具 Harbor</a></p>
    <h2 id="docker-rest-api"><a class="anchor" aria-hidden="true" tabindex="-1" href="#docker-rest-api"><span class="octicon octicon-link"></span></a>Docker REST API</h2>
    <p><code>Docker</code> 不仅可以通过本地命令行 <code>docker</code> 命令进行调用，还可以通过开启远程控制 <code>API</code>，使用 <code>HTTP</code> 调用接口来进行访问，远程控制 <code>Docker Daemon</code> 来做很多操作。<code>Docker</code> 的远程 <code>API</code> 服务默认监听的是 TCP <code>2375</code> 端口，为了保证安全，Docker 安装后默认不会启用远程 <code>API</code> 服务，因为这个服务默认不做权限认证。</p>
    <h3 id="centos"><a class="anchor" aria-hidden="true" tabindex="-1" href="#centos"><span class="octicon octicon-link"></span></a>CentOS</h3>
    <p>CentOS 的开启方法比较简单，先修改配置：</p>
    <pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line"><span class="token function">vim</span> /usr/lib/systemd/system/docker.service
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 修改 `ExecStart` 配置项，默认如下：</span>
</span><span class="code-line"><span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/bin/dockerd -H fd:// --containerd<span class="token operator">=</span>/run/containerd/containerd.sock
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 增加一个 `-H tcp://0.0.0.0:2375` 选项</span>
</span><span class="code-line"><span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/bin/dockerd -H fd:// -H tcp://0.0.0.0:2375 --containerd<span class="token operator">=</span>/run/containerd/containerd.sock
</span></code><div onclick="copied(this)" data-code="vim /usr/lib/systemd/system/docker.service

# 修改 &#x60;ExecStart&#x60; 配置项，默认如下：
ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock

# 增加一个 &#x60;-H tcp://0.0.0.0:2375&#x60; 选项
ExecStart=/usr/bin/dockerd -H fd:// -H tcp://0.0.0.0:2375 --containerd=/run/containerd/containerd.sock
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>如果是内网生产环境，也可以将 <code>0.0.0.0</code> 改为内网 IP。同样的，<code>2375</code> 端口也可以修改。但是这样可能还有一个问题，无法在命令行使用 <code>docker</code> 命令了，还需要添加 <code>sock</code> 选项：<code>-H unix:///var/run/docker.sock</code>，最后为：</p>
    <pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line"><span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/bin/dockerd -H fd:// -H unix:///var/run/docker.sock -H tcp://10.105.3.115:2375 --containerd<span class="token operator">=</span>/run/containerd/containerd.sock
</span></code><div onclick="copied(this)" data-code="ExecStart=/usr/bin/dockerd -H fd:// -H unix:///var/run/docker.sock -H tcp://10.105.3.115:2375 --containerd=/run/containerd/containerd.sock
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>修改完配置之后需要重启 Docker 服务：</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">systemctl daemon-reload
</span><span class="code-line">systemctl restart <span class="token function">docker</span>
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">service</span> <span class="token function">docker</span> restart
</span></code><div onclick="copied(this)" data-code="systemctl daemon-reload
systemctl restart docker
sudo service docker restart
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>重启完成后，可以使用 netstat 查看端口是否监听来确认是否成功：</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token punctuation">[</span>root@VM-3-115-centos ~<span class="token punctuation">]</span><span class="token comment"># netstat -nutlp | grep 2375</span>
</span><span class="code-line">tcp   <span class="token number">0</span>   <span class="token number">0</span> <span class="token number">10.105</span>.3.115:2375   <span class="token number">0.0</span>.0.0:*     LISTEN    <span class="token number">32316</span>/dockerd
</span></code><div onclick="copied(this)" data-code="[root@VM-3-115-centos ~]# netstat -nutlp | grep 2375
tcp   0   0 10.105.3.115:2375   0.0.0.0:*     LISTEN    32316/dockerd
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="macos"><a class="anchor" aria-hidden="true" tabindex="-1" href="#macos"><span class="octicon octicon-link"></span></a>MacOS</h3>
    <p>在 Mac 下无法直接修改配置文件来开启远程 API 服务，后来在 <a href="https://github.com/docker/for-mac"><code>docker/for-mac</code></a> 的 <a href="https://github.com/docker/for-mac/issues/770"><code>issue</code></a> 中得到了解决方案。</p>
    <p>可以运行一个 <a href="https://hub.docker.com/r/bobrik/socat"><code>bobrik/socat</code></a> 容器，将 <code>unix socket</code> 上的 Docker API 转发到 MacOS 上指定的端口中：</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">docker</span> run -d -v /var/run/docker.sock:/var/run/docker.sock -p <span class="token number">127.0</span>.0.1:2375:2375 bobrik/socat TCP-LISTEN:2375,fork UNIX-CONNECT:/var/run/docker.sock
</span></code><div onclick="copied(this)" data-code="docker run -d -v /var/run/docker.sock:/var/run/docker.sock -p 127.0.0.1:2375:2375 bobrik/socat TCP-LISTEN:2375,fork UNIX-CONNECT:/var/run/docker.sock
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="测试"><a class="anchor" aria-hidden="true" tabindex="-1" href="#测试"><span class="octicon octicon-link"></span></a>测试</h3>
    <p>启用成功后，可以进行一些测试，例如直接使用浏览器访问 info 和 version 等页面获取信息。</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">http://127.0.0.1:2375/info
</span><span class="code-line">http://127.0.0.1:2375/version
</span></code><div onclick="copied(this)" data-code="http://127.0.0.1:2375/info
http://127.0.0.1:2375/version
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>下面可测试 docker 是否启动了</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">curl</span> -s --unix-socket /var/run/docker.sock http://dummy/containers/json
</span><span class="code-line"><span class="token comment">## 或者使用下面命令</span>
</span><span class="code-line"><span class="token function">docker</span> info
</span></code><div onclick="copied(this)" data-code="curl -s --unix-socket /var/run/docker.sock http://dummy/containers/json
## 或者使用下面命令
docker info
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="使用docker实战"><a class="anchor" aria-hidden="true" tabindex="-1" href="#使用docker实战"><span class="octicon octicon-link"></span></a>使用Docker实战</h2>
    <blockquote>
      <p>⚠文件挂载注意：docker 禁止用主机上不存在的文件挂载到 container 中已经存在的文件</p>
    </blockquote>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">-d, --detach<span class="token operator">=</span>false      <span class="token comment"># 指定容器运行于前台还是后台，默认为false   </span>
</span><span class="code-line">-i, --interactive<span class="token operator">=</span>false <span class="token comment"># 打开STDIN，用于控制台交互  </span>
</span><span class="code-line">-t, --tty<span class="token operator">=</span>false         <span class="token comment"># 分配tty设备，该可以支持终端登录，默认为false  </span>
</span><span class="code-line">-u, --user<span class="token operator">=</span><span class="token string">""</span>           <span class="token comment"># 指定容器的用户  </span>
</span><span class="code-line">-a, --attach<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>         <span class="token comment"># 登录容器（必须是以docker run -d启动的容器）</span>
</span><span class="code-line">-w, --workdir<span class="token operator">=</span><span class="token string">""</span>        <span class="token comment"># 指定容器的工作目录 </span>
</span><span class="code-line">-c, --cpu-shares<span class="token operator">=</span><span class="token number">0</span>      <span class="token comment"># 设置容器CPU权重，在CPU共享场景使用  </span>
</span><span class="code-line">-e, --env<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>            <span class="token comment"># 指定环境变量，容器中可以使用该环境变量  </span>
</span><span class="code-line">-m, --memory<span class="token operator">=</span><span class="token string">""</span>         <span class="token comment"># 指定容器的内存上限  </span>
</span><span class="code-line">-P, --publish-all<span class="token operator">=</span>false <span class="token comment"># 指定容器暴露的端口  </span>
</span><span class="code-line">-p, --publish<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token comment"># 指定容器暴露的端口 </span>
</span><span class="code-line">-h, --hostname<span class="token operator">=</span><span class="token string">""</span>       <span class="token comment"># 指定容器的主机名  </span>
</span><span class="code-line">-v, --volume<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>         <span class="token comment"># 给容器挂载存储卷，挂载到容器的某个目录  </span>
</span><span class="code-line">--volumes-from<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>       <span class="token comment"># 给容器挂载其他容器上的卷，挂载到容器的某个目录</span>
</span><span class="code-line">--cap-add<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>            <span class="token comment"># 添加权限，权限清单详见：http://linux.die.net/man/7/capabilities  </span>
</span><span class="code-line">--cap-drop<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>           <span class="token comment"># 删除权限，权限清单详见：http://linux.die.net/man/7/capabilities  </span>
</span><span class="code-line">--cidfile<span class="token operator">=</span><span class="token string">""</span>            <span class="token comment"># 运行容器后，在指定文件中写入容器PID值，一种典型的监控系统用法  </span>
</span><span class="code-line">--cpuset<span class="token operator">=</span><span class="token string">""</span>             <span class="token comment"># 设置容器可以使用哪些CPU，此参数可以用来容器独占CPU  </span>
</span><span class="code-line">--device<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>             <span class="token comment"># 添加主机设备给容器，相当于设备直通  </span>
</span><span class="code-line">--dns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>                <span class="token comment"># 指定容器的dns服务器  </span>
</span><span class="code-line">--dns-search<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>         <span class="token comment"># 指定容器的dns搜索域名，写入到容器的/etc/resolv.conf文件  </span>
</span><span class="code-line">--entrypoint<span class="token operator">=</span><span class="token string">""</span>         <span class="token comment"># 覆盖image的入口点  </span>
</span><span class="code-line">--env-file<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>           <span class="token comment"># 指定环境变量文件，文件格式为每行一个环境变量  </span>
</span><span class="code-line">--expose<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>             <span class="token comment"># 指定容器暴露的端口，即修改镜像的暴露端口  </span>
</span><span class="code-line">--link<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>               <span class="token comment"># 指定容器间的关联，使用其他容器的IP、env等信息  </span>
</span><span class="code-line">--lxc-conf<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>           <span class="token comment"># 指定容器的配置文件，只有在指定--exec-driver=lxc时使用  </span>
</span><span class="code-line">--name<span class="token operator">=</span><span class="token string">""</span>               <span class="token comment"># 指定容器名字，后续可以通过名字进行容器管理，links特性需要使用名字  </span>
</span><span class="code-line">--net<span class="token operator">=</span><span class="token string">"bridge"</span>          <span class="token comment"># 容器网络设置:</span>
</span><span class="code-line">                            <span class="token comment"># bridge 使用docker daemon指定的网桥     </span>
</span><span class="code-line">                            <span class="token comment"># host 	//容器使用主机的网络  </span>
</span><span class="code-line">                            <span class="token comment"># container:NAME_or_ID  >//使用其他容器的网路，共享IP和PORT等网络资源  </span>
</span><span class="code-line">                            <span class="token comment"># none 容器使用自己的网络（类似--net=bridge），但是不进行配置 </span>
</span><span class="code-line">--privileged<span class="token operator">=</span>false      <span class="token comment"># 指定容器是否为特权容器，特权容器拥有所有的capabilities  </span>
</span><span class="code-line">--restart<span class="token operator">=</span><span class="token string">"no"</span>          <span class="token comment"># 指定容器停止后的重启策略:</span>
</span><span class="code-line">                            <span class="token comment"># no：容器退出时不重启  </span>
</span><span class="code-line">                            <span class="token comment"># on-failure：容器故障退出（返回值非零）时重启 </span>
</span><span class="code-line">                            <span class="token comment"># always：容器退出时总是重启  </span>
</span><span class="code-line">--rm<span class="token operator">=</span>false              <span class="token comment"># 指定容器停止后自动删除容器(不支持以docker run -d启动的容器)  </span>
</span><span class="code-line">--sig-proxy<span class="token operator">=</span>true        <span class="token comment"># 设置由代理接受并处理信号，但是SIGCHLD、SIGSTOP和SIGKILL不能被代理</span>
</span></code><div onclick="copied(this)" data-code="-d, --detach=false      # 指定容器运行于前台还是后台，默认为false   
-i, --interactive=false # 打开STDIN，用于控制台交互  
-t, --tty=false         # 分配tty设备，该可以支持终端登录，默认为false  
-u, --user=&#x22;&#x22;           # 指定容器的用户  
-a, --attach=[]         # 登录容器（必须是以docker run -d启动的容器）
-w, --workdir=&#x22;&#x22;        # 指定容器的工作目录 
-c, --cpu-shares=0      # 设置容器CPU权重，在CPU共享场景使用  
-e, --env=[]            # 指定环境变量，容器中可以使用该环境变量  
-m, --memory=&#x22;&#x22;         # 指定容器的内存上限  
-P, --publish-all=false # 指定容器暴露的端口  
-p, --publish=[]        # 指定容器暴露的端口 
-h, --hostname=&#x22;&#x22;       # 指定容器的主机名  
-v, --volume=[]         # 给容器挂载存储卷，挂载到容器的某个目录  
--volumes-from=[]       # 给容器挂载其他容器上的卷，挂载到容器的某个目录
--cap-add=[]            # 添加权限，权限清单详见：http://linux.die.net/man/7/capabilities  
--cap-drop=[]           # 删除权限，权限清单详见：http://linux.die.net/man/7/capabilities  
--cidfile=&#x22;&#x22;            # 运行容器后，在指定文件中写入容器PID值，一种典型的监控系统用法  
--cpuset=&#x22;&#x22;             # 设置容器可以使用哪些CPU，此参数可以用来容器独占CPU  
--device=[]             # 添加主机设备给容器，相当于设备直通  
--dns=[]                # 指定容器的dns服务器  
--dns-search=[]         # 指定容器的dns搜索域名，写入到容器的/etc/resolv.conf文件  
--entrypoint=&#x22;&#x22;         # 覆盖image的入口点  
--env-file=[]           # 指定环境变量文件，文件格式为每行一个环境变量  
--expose=[]             # 指定容器暴露的端口，即修改镜像的暴露端口  
--link=[]               # 指定容器间的关联，使用其他容器的IP、env等信息  
--lxc-conf=[]           # 指定容器的配置文件，只有在指定--exec-driver=lxc时使用  
--name=&#x22;&#x22;               # 指定容器名字，后续可以通过名字进行容器管理，links特性需要使用名字  
--net=&#x22;bridge&#x22;          # 容器网络设置:
                            # bridge 使用docker daemon指定的网桥     
                            # host 	//容器使用主机的网络  
                            # container:NAME_or_ID  >//使用其他容器的网路，共享IP和PORT等网络资源  
                            # none 容器使用自己的网络（类似--net=bridge），但是不进行配置 
--privileged=false      # 指定容器是否为特权容器，特权容器拥有所有的capabilities  
--restart=&#x22;no&#x22;          # 指定容器停止后的重启策略:
                            # no：容器退出时不重启  
                            # on-failure：容器故障退出（返回值非零）时重启 
                            # always：容器退出时总是重启  
--rm=false              # 指定容器停止后自动删除容器(不支持以docker run -d启动的容器)  
--sig-proxy=true        # 设置由代理接受并处理信号，但是SIGCHLD、SIGSTOP和SIGKILL不能被代理
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="nginx"><a class="anchor" aria-hidden="true" tabindex="-1" href="#nginx"><span class="octicon octicon-link"></span></a><code>Nginx</code></h3>
    <p><a href="nginx.html">在 docker 中部署 Nginx</a></p>
    <h3 id="mysql"><a class="anchor" aria-hidden="true" tabindex="-1" href="#mysql"><span class="octicon octicon-link"></span></a><code>MySQL</code></h3>
    <p><a href="mysql.html">在 docker 中部署 MySQL</a></p>
    <h3 id="postgresql"><a class="anchor" aria-hidden="true" tabindex="-1" href="#postgresql"><span class="octicon octicon-link"></span></a><code>PostgreSQL</code></h3>
    <p><a href="postgres.html">在 docker 中部署 PostgreSQL</a></p>
    <h3 id="redis"><a class="anchor" aria-hidden="true" tabindex="-1" href="#redis"><span class="octicon octicon-link"></span></a><code>Redis</code></h3>
    <p><a href="redis.html">在 docker 中部署 Redis</a></p>
    <h3 id="elasticsearch"><a class="anchor" aria-hidden="true" tabindex="-1" href="#elasticsearch"><span class="octicon octicon-link"></span></a><code>Elasticsearch</code></h3>
    <p><a href="elasticsearch.html">在 docker 中部署 Elasticsearch</a></p>
    <h3 id="gitlab"><a class="anchor" aria-hidden="true" tabindex="-1" href="#gitlab"><span class="octicon octicon-link"></span></a><code>Gitlab</code></h3>
    <p><a href="gitlab.html">在 docker 中部署 Gitlab</a></p>
    <h3 id="rocketchat"><a class="anchor" aria-hidden="true" tabindex="-1" href="#rocketchat"><span class="octicon octicon-link"></span></a><code>Rocket.Chat</code></h3>
    <p><a href="rocket.chat.html">在 docker 中部署 Gitlab</a></p>
    <h3 id="rancher"><a class="anchor" aria-hidden="true" tabindex="-1" href="#rancher"><span class="octicon octicon-link"></span></a><code>Rancher</code></h3>
    <p><a href="rancher.html">在 docker 中部署 Rancher</a></p>
    <h3 id="portainer"><a class="anchor" aria-hidden="true" tabindex="-1" href="#portainer"><span class="octicon octicon-link"></span></a><code>Portainer</code></h3>
    <p><a href="portainer.html">在 docker 中部署 Portainer</a></p>
    <h3 id="sourcegraph"><a class="anchor" aria-hidden="true" tabindex="-1" href="#sourcegraph"><span class="octicon octicon-link"></span></a><code>Sourcegraph</code></h3>
    <p><a href="sourcegraph.html">在 docker 中部署 Sourcegraph</a></p>
    <h3 id="mattermost"><a class="anchor" aria-hidden="true" tabindex="-1" href="#mattermost"><span class="octicon octicon-link"></span></a><code>Mattermost</code></h3>
    <p><a href="mattermost.html">在 docker 中部署 Mattermost</a></p>
    <h3 id="seaweedfs"><a class="anchor" aria-hidden="true" tabindex="-1" href="#seaweedfs"><span class="octicon octicon-link"></span></a><code>SeaweedFS</code></h3>
    <p><a href="seaweedfs.html">在 docker 中部署 SeaweedFS</a></p>
    <h3 id="nps"><a class="anchor" aria-hidden="true" tabindex="-1" href="#nps"><span class="octicon octicon-link"></span></a><code>NPS</code></h3>
    <p><a href="nps.html">在 docker 中搭建内网穿透服务器，带WEB管理</a></p>
    <h3 id="humpback"><a class="anchor" aria-hidden="true" tabindex="-1" href="#humpback"><span class="octicon octicon-link"></span></a><code>Humpback</code></h3>
    <p>首先创建放持久化数据文件夹，<code>mkdir -p /opt/app/humpback-web</code>，里面存放持久化数据文件，会存储站点管理和分组信息，启动后请妥善保存。</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># 创建放持久化数据文件夹</span>
</span><span class="code-line"><span class="token function">mkdir</span> -p /opt/app/humpback-web
</span><span class="code-line"><span class="token comment"># 下载humpback-web镜像到本地</span>
</span><span class="code-line"><span class="token function">docker</span> pull humpbacks/humpback-web:1.0.0
</span><span class="code-line"><span class="token comment"># 启动 humpback-web 容器，将容器命名为 humpback-web</span>
</span><span class="code-line"><span class="token function">docker</span> run -d --net<span class="token operator">=</span>host --restart<span class="token operator">=</span>always <span class="token punctuation">\</span>
</span><span class="code-line"> -e <span class="token assign-left variable">HUMPBACK_LISTEN_PORT</span><span class="token operator">=</span><span class="token number">7001</span> <span class="token punctuation">\</span>
</span><span class="code-line"> -v /opt/app/humpback-web/dbFiles:/humpback-web/dbFiles <span class="token punctuation">\</span>
</span><span class="code-line"> --name humpback-web <span class="token punctuation">\</span>
</span><span class="code-line"> humpbacks/humpback-web:1.0.0
</span></code><div onclick="copied(this)" data-code="# 创建放持久化数据文件夹
mkdir -p /opt/app/humpback-web
# 下载humpback-web镜像到本地
docker pull humpbacks/humpback-web:1.0.0
# 启动 humpback-web 容器，将容器命名为 humpback-web
docker run -d --net=host --restart=always \
 -e HUMPBACK_LISTEN_PORT=7001 \
 -v /opt/app/humpback-web/dbFiles:/humpback-web/dbFiles \
 --name humpback-web \
 humpbacks/humpback-web:1.0.0
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>访问站点，打开浏览器输入：<a href="http://192.168.99.100:7001/">http://192.168.99.100:7001</a> ，默认账户：<code>admin</code> 密码：<code>123456</code></p>
    <h3 id="seafile"><a class="anchor" aria-hidden="true" tabindex="-1" href="#seafile"><span class="octicon octicon-link"></span></a><code>Seafile</code></h3>
    <pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line"><span class="token function">docker</span> run -d --name seafile <span class="token punctuation">\</span>
</span><span class="code-line">  -e <span class="token assign-left variable">SEAFILE_SERVER_HOSTNAME</span><span class="token operator">=</span>seafile.example.com <span class="token punctuation">\</span>
</span><span class="code-line">  -v /opt/seafile-data:/shared <span class="token punctuation">\</span>
</span><span class="code-line">  -p <span class="token number">80</span>:80 <span class="token punctuation">\</span>
</span><span class="code-line">  seafileltd/seafile:latest
</span></code><div onclick="copied(this)" data-code="docker run -d --name seafile \
  -e SEAFILE_SERVER_HOSTNAME=seafile.example.com \
  -v /opt/seafile-data:/shared \
  -p 80:80 \
  seafileltd/seafile:latest
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line"><span class="token function">docker</span> run -d --name seafile <span class="token punctuation">\</span>
</span><span class="code-line">  -e <span class="token assign-left variable">SEAFILE_SERVER_HOSTNAME</span><span class="token operator">=</span>pan.showgold.com <span class="token punctuation">\</span>
</span><span class="code-line">  -e <span class="token assign-left variable">SEAFILE_ADMIN_EMAIL</span><span class="token operator">=</span>wcj@nihaosi.com <span class="token punctuation">\</span>
</span><span class="code-line">  -e <span class="token assign-left variable">SEAFILE_ADMIN_PASSWORD</span><span class="token operator">=</span>wcj@nihaosi.com <span class="token punctuation">\</span>
</span><span class="code-line">  -v <span class="token environment constant">$HOME</span>/_docker/seafile-data:/shared <span class="token punctuation">\</span>
</span><span class="code-line">  -p <span class="token number">80</span>:80 <span class="token punctuation">\</span>
</span><span class="code-line">  seafileltd/seafile:latest
</span></code><div onclick="copied(this)" data-code="docker run -d --name seafile \
  -e SEAFILE_SERVER_HOSTNAME=pan.showgold.com \
  -e SEAFILE_ADMIN_EMAIL=wcj@nihaosi.com \
  -e SEAFILE_ADMIN_PASSWORD=wcj@nihaosi.com \
  -v $HOME/_docker/seafile-data:/shared \
  -p 80:80 \
  seafileltd/seafile:latest
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="更多"><a class="anchor" aria-hidden="true" tabindex="-1" href="#更多"><span class="octicon octicon-link"></span></a>更多</h3>
    <p><a href="docker/">更多 docker 工具部署，在 docker 目录中</a></p>
    <h2 id="卸载旧的版本"><a class="anchor" aria-hidden="true" tabindex="-1" href="#卸载旧的版本"><span class="octicon octicon-link"></span></a>卸载旧的版本</h2>
    <p>移除旧的版本</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">$ <span class="token function">sudo</span> yum remove <span class="token function">docker</span> <span class="token punctuation">\</span>
</span><span class="code-line">  docker-client <span class="token punctuation">\</span>
</span><span class="code-line">  docker-client-latest <span class="token punctuation">\</span>
</span><span class="code-line">  docker-common <span class="token punctuation">\</span>
</span><span class="code-line">  docker-latest <span class="token punctuation">\</span>
</span><span class="code-line">  docker-latest-logrotate <span class="token punctuation">\</span>
</span><span class="code-line">  docker-logrotate <span class="token punctuation">\</span>
</span><span class="code-line">  docker-selinux <span class="token punctuation">\</span>
</span><span class="code-line">  docker-engine-selinux <span class="token punctuation">\</span>
</span><span class="code-line">  docker-engine
</span></code><div onclick="copied(this)" data-code="$ sudo yum remove docker \
  docker-client \
  docker-client-latest \
  docker-common \
  docker-latest \
  docker-latest-logrotate \
  docker-logrotate \
  docker-selinux \
  docker-engine-selinux \
  docker-engine
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="错误处理"><a class="anchor" aria-hidden="true" tabindex="-1" href="#错误处理"><span class="octicon octicon-link"></span></a>错误处理</h2>
    <p>Create more free space in thin pool or use dm.min_free_space option to change behavior</p>
    <blockquote>
      <p>特别慎用，东西都没有了，注意备份哦。<a href="https://github.com/moby/moby/issues/3182#issuecomment-256532928">https://github.com/moby/moby/issues/3182#issuecomment-256532928</a></p>
    </blockquote>
    <p><strong>镜像拉不下来</strong></p>
    <p>修改 Docker <code>daemon.json</code> 配置 macOS: <code>/etc/docker/daemon.json</code>，Linux: <code>~/.docker/daemon.json</code></p>
    <pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token string-property property">"registry-mirrors"</span><span class="token operator">:</span><span class="token punctuation">[</span>
</span><span class="code-line">     <span class="token string">"https://docker.mirrors.ustc.edu.cn"</span><span class="token punctuation">,</span>
</span><span class="code-line">     <span class="token string">"https://hub-mirror.c.163.com"</span><span class="token punctuation">,</span>
</span><span class="code-line">     <span class="token string">"https://mirror.baidubce.com"</span><span class="token punctuation">,</span>
</span><span class="code-line">     <span class="token string">"https://registry.docker-cn.com"</span>
</span><span class="code-line">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token string-property property">"insecure-registries"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">     <span class="token string">"192.168.188.111:2021"</span>
</span><span class="code-line">  <span class="token punctuation">]</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div onclick="copied(this)" data-code="{
  &#x22;registry-mirrors&#x22;:[
     &#x22;https://docker.mirrors.ustc.edu.cn&#x22;,
     &#x22;https://hub-mirror.c.163.com&#x22;,
     &#x22;https://mirror.baidubce.com&#x22;,
     &#x22;https://registry.docker-cn.com&#x22;
  ],
  &#x22;insecure-registries&#x22;: [
     &#x22;192.168.188.111:2021&#x22;
  ]
}
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="参考资料"><a class="anchor" aria-hidden="true" tabindex="-1" href="#参考资料"><span class="octicon octicon-link"></span></a>参考资料</h2>
    <h3 id="官方英文资源"><a class="anchor" aria-hidden="true" tabindex="-1" href="#官方英文资源"><span class="octicon octicon-link"></span></a>官方英文资源</h3>
    <ul>
      <li>Docker官网：<a href="http://www.docker.com/">http://www.docker.com</a></li>
      <li>Docker windows入门：<a href="https://docs.docker.com/windows/">https://docs.docker.com/windows/</a></li>
      <li>Docker Linux 入门：<a href="https://docs.docker.com/linux/">https://docs.docker.com/linux/</a></li>
      <li>Docker mac 入门：<a href="https://docs.docker.com/mac/">https://docs.docker.com/mac/</a></li>
      <li>Docker 用户指引：<a href="https://docs.docker.com/engine/userguide/">https://docs.docker.com/engine/userguide/</a></li>
      <li>Docker 官方博客：<a href="http://blog.docker.com/">http://blog.docker.com/</a></li>
      <li>Docker Hub: <a href="https://hub.docker.com/">https://hub.docker.com/</a></li>
      <li>Docker开源： <a href="https://www.docker.com/open-source">https://www.docker.com/open-source</a></li>
    </ul>
    <h3 id="中文资源"><a class="anchor" aria-hidden="true" tabindex="-1" href="#中文资源"><span class="octicon octicon-link"></span></a>中文资源</h3>
    <ul>
      <li>Docker中文网站：<a href="http://www.docker.org.cn/">http://www.docker.org.cn</a></li>
      <li>Docker中文文档：<a href="http://www.dockerinfo.net/document">http://www.dockerinfo.net/document</a></li>
      <li>Docker安装手册：<a href="http://www.docker.org.cn/book/install.html">http://www.docker.org.cn/book/install.html</a></li>
      <li>一小时Docker教程 ：<a href="https://blog.csphere.cn/archives/22">https://blog.csphere.cn/archives/22</a></li>
      <li>Docker中文指南：<a href="http://www.widuu.com/chinese_docker/index.html">http://www.widuu.com/chinese_docker/index.html</a></li>
    </ul>
    <h3 id="其它资源"><a class="anchor" aria-hidden="true" tabindex="-1" href="#其它资源"><span class="octicon octicon-link"></span></a>其它资源</h3>
    <ul>
      <li><a href="https://github.com/eon01/DockerCheatSheet">Docker 快速手册！</a></li>
      <li><a href="http://www.runoob.com/docker/docker-tutorial.html">Docker 教程</a></li>
      <li><a href="https://www.gitbook.com/book/yeasy/docker_practice">Docker 从入门到实践</a></li>
      <li><a href="http://blog.csdn.net/zhangchao19890805/article/details/52756865">MySQL Docker 单一机器上如何配置自动备份</a></li>
      <li><a href="http://dockone.io/article/834">使用Docker Compose管理多个容器</a></li>
      <li><a href="https://segmentfault.com/t/docker">https://segmentfault.com/t/docker</a></li>
      <li><a href="https://github.com/docker/docker">https://github.com/docker/docker</a></li>
      <li><a href="https://wiki.openstack.org/wiki/Docker">https://wiki.openstack.org/wiki/Docker</a></li>
      <li><a href="https://wiki.archlinux.org/index.php/Docker">https://wiki.archlinux.org/index.php/Docker</a></li>
    </ul>
  <style>.markdown-body pre .copied {
  display: flex;
  position: absolute;
  cursor: pointer;
  color: #a5afbb;
  top: 6px;
  right: 6px;
  border-radius: 5px;
  background: #82828226;
  padding: 6px;
  font-size: 12px;
  transition: all .3s;
}
.markdown-body pre .copied:not(.active) {
  visibility: hidden;
}
.markdown-body pre:hover .copied {
  visibility: visible;
}
.markdown-body pre:hover .copied:hover {
  background: #4caf50;
  color: #fff;
}
.markdown-body pre:hover .copied:active,
.markdown-body pre .copied.active {
  background: #2e9b33;
  color: #fff;
}
.markdown-body pre .copied .octicon-copy {
  display: block;
}
.markdown-body pre .copied .octicon-check {
  display: none;
}
.markdown-body pre .active .octicon-copy {
  display: none;
}
.markdown-body pre .active .octicon-check {
  display: block;
}</style><script>/*! @uiw/copy-to-clipboard v1.0.12 | MIT (c) 2021 Kenny Wang | https://github.com/uiwjs/copy-to-clipboard.git */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).copyTextToClipboard=t()}(this,(function(){"use strict";return function(e,t){const o=document.createElement("textarea");o.value=e,o.setAttribute("readonly",""),o.style={position:"absolute",left:"-9999px"},document.body.appendChild(o);const n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);o.select();let c=!1;try{c=!!document.execCommand("copy")}catch(e){c=!1}document.body.removeChild(o),n&&document.getSelection&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n)),t&&t(c)}}));

function copied(target, str) {
  target.classList.add('active');
  copyTextToClipboard(target.dataset.code, function() {
    setTimeout(() => {
      target.classList.remove('active');
    }, 2000);
  });
}</script></markdown-style></body>
</html>
